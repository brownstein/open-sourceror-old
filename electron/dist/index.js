module.exports=function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=64)}([function(t,e,o){var i=t.exports={},n=o(2);i.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},i.crossVZ=function(t,e,o){return i.rotate(t,e,-Math.PI/2),i.scale(t,t,o),t},i.crossZV=function(t,e,o){return i.rotate(t,o,Math.PI/2),i.scale(t,t,e),t},i.rotate=function(t,e,o){if(0!==o){var i=Math.cos(o),n=Math.sin(o),r=e[0],s=e[1];t[0]=i*r-n*s,t[1]=n*r+i*s}else t[0]=e[0],t[1]=e[1]},i.rotate90cw=function(t,e){var o=e[0],i=e[1];t[0]=i,t[1]=-o},i.toLocalFrame=function(t,e,o,n){i.copy(t,e),i.sub(t,t,o),i.rotate(t,t,-n)},i.toGlobalFrame=function(t,e,o,n){i.copy(t,e),i.rotate(t,t,n),i.add(t,t,o)},i.vectorToLocalFrame=function(t,e,o){i.rotate(t,e,-o)},i.vectorToGlobalFrame=function(t,e,o){i.rotate(t,e,o)},i.centroid=function(t,e,o,n){return i.add(t,e,o),i.add(t,t,n),i.scale(t,t,1/3),t},i.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var o=new n.ARRAY_TYPE(2);return o[0]=t,o[1]=e,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,o){return t[0]=e,t[1]=o,t},i.add=function(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t},i.subtract=function(t,e,o){return t[0]=e[0]-o[0],t[1]=e[1]-o[1],t},i.sub=i.subtract,i.multiply=function(t,e,o){return t[0]=e[0]*o[0],t[1]=e[1]*o[1],t},i.mul=i.multiply,i.divide=function(t,e,o){return t[0]=e[0]/o[0],t[1]=e[1]/o[1],t},i.div=i.divide,i.scale=function(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t},i.distance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(o*o+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return o*o+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],o=t[1];return Math.sqrt(e*e+o*o)},i.len=i.length,i.squaredLength=function(t){var e=t[0],o=t[1];return e*e+o*o},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.normalize=function(t,e){var o=e[0],i=e[1],n=o*o+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},i.lerp=function(t,e,o,i){var n=e[0],r=e[1];return t[0]=n+i*(o[0]-n),t[1]=r+i*(o[1]-r),t},i.reflect=function(t,e,o){var i=e[0]*o[0]+e[1]*o[1];t[0]=e[0]-2*o[0]*i,t[1]=e[1]-2*o[1]*i},i.getLineSegmentsIntersection=function(t,e,o,n,r){var s=i.getLineSegmentsIntersectionFraction(e,o,n,r);return!(s<0)&&(t[0]=e[0]+s*(o[0]-e[0]),t[1]=e[1]+s*(o[1]-e[1]),!0)},i.getLineSegmentsIntersectionFraction=function(t,e,o,i){var n,r,s=e[0]-t[0],a=e[1]-t[1],c=i[0]-o[0],h=i[1]-o[1];return n=(-a*(t[0]-o[0])+s*(t[1]-o[1]))/(-c*a+s*h),r=(c*(t[1]-o[1])-h*(t[0]-o[0]))/(-c*a+s*h),n>=0&&n<=1&&r>=0&&r<=1?r:-1}},function(t,e){t.exports=require("three")},function(t,e){function o(){}t.exports=o,o.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var o=0,i=e.length;o!==i;++o)t.push(e[o])},o.splice=function(t,e,o){o=o||1;for(var i=e,n=t.length-o;i<n;i++)t[i]=t[i+o];t.length=n},"undefined"!=typeof P2_ARRAY_TYPE?o.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?o.ARRAY_TYPE=Float32Array:o.ARRAY_TYPE=Array,o.extend=function(t,e){for(var o in e)t[o]=e[o]},o.defaults=function(t,e){for(var o in t=t||{},e)o in t||(t[o]=e[o]);return t}},function(t,e,o){t.exports=r;var i=o(0),n=o(2);o(6);function r(t,e,o,i){this.minForce=void 0===o?-Number.MAX_VALUE:o,this.maxForce=void 0===i?Number.MAX_VALUE:i,this.bodyA=t,this.bodyB=e,this.stiffness=r.DEFAULT_STIFFNESS,this.relaxation=r.DEFAULT_RELAXATION,this.G=new n.ARRAY_TYPE(6);for(var s=0;s<6;s++)this.G[s]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}r.prototype.constructor=r,r.DEFAULT_STIFFNESS=1e6,r.DEFAULT_RELAXATION=4,r.prototype.update=function(){var t=this.stiffness,e=this.relaxation,o=this.timeStep;this.a=4/(o*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(o*o*t*(1+4*e)),this.needsUpdate=!1},r.prototype.gmult=function(t,e,o,i,n){return t[0]*e[0]+t[1]*e[1]+t[2]*o+t[3]*i[0]+t[4]*i[1]+t[5]*n},r.prototype.computeB=function(t,e,o){var i=this.computeGW();return-this.computeGq()*t-i*e-this.computeGiMf()*o};var s=i.create(),a=i.create();r.prototype.computeGq=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=(e.position,o.position,e.angle),n=o.angle;return this.gmult(t,s,i,a,n)+this.offset},r.prototype.computeGW=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=e.velocity,n=o.velocity,r=e.angularVelocity,s=o.angularVelocity;return this.gmult(t,i,r,n,s)+this.relativeVelocity},r.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=e.vlambda,n=o.vlambda,r=e.wlambda,s=o.wlambda;return this.gmult(t,i,r,n,s)};var c=i.create(),h=i.create();r.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,o=t.force,n=t.angularForce,r=e.force,s=e.angularForce,a=t.invMassSolve,l=e.invMassSolve,p=t.invInertiaSolve,u=e.invInertiaSolve,d=this.G;return i.scale(c,o,a),i.multiply(c,t.massMultiplier,c),i.scale(h,r,l),i.multiply(h,e.massMultiplier,h),this.gmult(d,c,n*p,h,s*u)},r.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,o=t.invMassSolve,i=e.invMassSolve,n=t.invInertiaSolve,r=e.invInertiaSolve,s=this.G;return s[0]*s[0]*o*t.massMultiplier[0]+s[1]*s[1]*o*t.massMultiplier[1]+s[2]*s[2]*n+s[3]*s[3]*i*e.massMultiplier[0]+s[4]*s[4]*i*e.massMultiplier[1]+s[5]*s[5]*r};var l=i.create(),p=i.create(),u=i.create();i.create(),i.create(),i.create();r.prototype.addToWlambda=function(t){var e=this.bodyA,o=this.bodyB,n=l,r=p,s=u,a=e.invMassSolve,c=o.invMassSolve,h=e.invInertiaSolve,d=o.invInertiaSolve,f=this.G;r[0]=f[0],r[1]=f[1],s[0]=f[3],s[1]=f[4],i.scale(n,r,a*t),i.multiply(n,n,e.massMultiplier),i.add(e.vlambda,e.vlambda,n),e.wlambda+=h*f[2]*t,i.scale(n,s,c*t),i.multiply(n,n,o.massMultiplier),i.add(o.vlambda,o.vlambda,n),o.wlambda+=d*f[5]*t},r.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},function(t,e,o){t.exports=n;var i=o(0);function n(t){t=t||{},this.body=null,this.position=i.fromValues(0,0),t.position&&i.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=n.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}n.idCounter=0,n.CIRCLE=1,n.PARTICLE=2,n.PLANE=4,n.CONVEX=8,n.LINE=16,n.BOX=32,Object.defineProperty(n,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),n.BOX}}),n.CAPSULE=64,n.HEIGHTFIELD=128,n.prototype.computeMomentOfInertia=function(t){},n.prototype.updateBoundingRadius=function(){},n.prototype.updateArea=function(){},n.prototype.computeAABB=function(t,e,o){},n.prototype.raycast=function(t,e,o,i){}},function(t,e,o){var i=t.exports={AABB:o(12),AngleLockEquation:o(24),Body:o(6),Broadphase:o(15),Capsule:o(28),Circle:o(16),Constraint:o(7),ContactEquation:o(17),ContactEquationPool:o(29),ContactMaterial:o(30),Convex:o(10),DistanceConstraint:o(31),Equation:o(3),EventEmitter:o(14),FrictionEquation:o(11),FrictionEquationPool:o(32),GearConstraint:o(33),GSSolver:o(34),Heightfield:o(54),Line:o(35),LockConstraint:o(36),Material:o(19),Narrowphase:o(37),NaiveBroadphase:o(55),Particle:o(22),Plane:o(21),Pool:o(8),RevoluteConstraint:o(40),PrismaticConstraint:o(43),Ray:o(13),RaycastResult:o(18),Box:o(39),RotationalVelocityEquation:o(41),SAPBroadphase:o(44),Shape:o(4),Solver:o(20),Spring:o(23),TopDownVehicle:o(56),LinearSpring:o(45),RotationalSpring:o(46),Utils:o(2),World:o(57),vec2:o(0),version:o(47).version};Object.defineProperty(i,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},function(t,e,o){var i=o(0),n=o(25),r=o(10),s=o(18),a=o(13),c=o(12),h=o(14);function l(t){t=t||{},h.call(this),this.id=t.id||++l._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=i.create(),this.position=i.fromValues(0,0),t.position&&i.copy(this.position,t.position),this.interpolatedPosition=i.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=i.fromValues(0,0),this.previousAngle=0,this.velocity=i.fromValues(0,0),t.velocity&&i.copy(this.velocity,t.velocity),this.vlambda=i.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=i.create(),t.force&&i.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=l.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=l.DYNAMIC:this.type=l.STATIC,this.boundingRadius=0,this.aabb=new c,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=l.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}t.exports=l,l.prototype=new h,l.prototype.constructor=l,l._idCounter=0,l.prototype.updateSolveMassProperties=function(){this.sleepState===l.SLEEPING||this.type===l.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},l.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},l.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},l.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var p=new c,u=i.create();l.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,o=u,n=this.angle,r=0;r!==e;r++){var s=t[r],a=s.angle+n;i.rotate(o,s.position,n),i.add(o,o,this.position),s.computeAABB(p,o,a),0===r?this.aabb.copy(p):this.aabb.extend(p)}this.aabbNeedsUpdate=!1},l.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,o=0,n=0;n!==e;n++){var r=t[n],s=i.length(r.position),a=r.boundingRadius;s+a>o&&(o=s+a)}this.boundingRadius=o},l.prototype.addShape=function(t,e,o){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?i.copy(t.position,e):i.set(t.position,0,0),t.angle=o||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},l.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},l.prototype.updateMassProperties=function(){if(this.type===l.STATIC||this.type===l.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,o=this.mass/e,n=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;r<e;r++){var s=t[r],a=i.squaredLength(s.position);n+=s.computeMomentOfInertia(o)+o*a}this.inertia=n,this.invInertia=n>0?1/n:0}this.invMass=1/this.mass,i.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};i.create();l.prototype.applyForce=function(t,e){if(i.add(this.force,this.force,t),e){var o=i.crossLength(e,t);this.angularForce+=o}};var d=i.create(),f=i.create(),v=i.create();l.prototype.applyForceLocal=function(t,e){e=e||v;var o=d,i=f;this.vectorToWorldFrame(o,t),this.vectorToWorldFrame(i,e),this.applyForce(o,i)};var g=i.create();l.prototype.applyImpulse=function(t,e){if(this.type===l.DYNAMIC){var o=g;if(i.scale(o,t,this.invMass),i.multiply(o,this.massMultiplier,o),i.add(this.velocity,o,this.velocity),e){var n=i.crossLength(e,t);n*=this.invInertia,this.angularVelocity+=n}}};var y=i.create(),m=i.create(),b=i.create();l.prototype.applyImpulseLocal=function(t,e){e=e||b;var o=y,i=m;this.vectorToWorldFrame(o,t),this.vectorToWorldFrame(i,e),this.applyImpulse(o,i)},l.prototype.toLocalFrame=function(t,e){i.toLocalFrame(t,e,this.position,this.angle)},l.prototype.toWorldFrame=function(t,e){i.toGlobalFrame(t,e,this.position,this.angle)},l.prototype.vectorToLocalFrame=function(t,e){i.vectorToLocalFrame(t,e,this.angle)},l.prototype.vectorToWorldFrame=function(t,e){i.vectorToGlobalFrame(t,e,this.angle)},l.prototype.fromPolygon=function(t,e){e=e||{};for(var o=this.shapes.length;o>=0;--o)this.removeShape(this.shapes[o]);var s,a=new n.Polygon;if(a.vertices=t,a.makeCCW(),"number"==typeof e.removeCollinearPoints&&a.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!a.isSimple())return!1;this.concavePath=a.vertices.slice(0);for(o=0;o<this.concavePath.length;o++){var c=[0,0];i.copy(c,this.concavePath[o]),this.concavePath[o]=c}s=e.optimalDecomp?a.decomp():a.quickDecomp();var h=i.create();for(o=0;o!==s.length;o++){for(var l=new r({vertices:s[o].vertices}),p=0;p!==l.vertices.length;p++){c=l.vertices[p];i.sub(c,c,l.centerOfMass)}i.scale(h,l.centerOfMass,1),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),this.addShape(l,h)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};i.fromValues(0,0);var A=i.fromValues(0,0),E=i.fromValues(0,0),B=i.fromValues(0,0);l.prototype.adjustCenterOfMass=function(){var t=A,e=E,o=B,n=0;i.set(e,0,0);for(var r=0;r!==this.shapes.length;r++){var s=this.shapes[r];i.scale(t,s.position,s.area),i.add(e,e,t),n+=s.area}i.scale(o,e,1/n);for(r=0;r!==this.shapes.length;r++){s=this.shapes[r];i.sub(s.position,s.position,o)}i.add(this.position,this.position,o);for(r=0;this.concavePath&&r<this.concavePath.length;r++)i.sub(this.concavePath[r],this.concavePath[r],o);this.updateMassProperties(),this.updateBoundingRadius()},l.prototype.setZeroForce=function(){i.set(this.force,0,0),this.angularForce=0},l.prototype.resetConstraintVelocity=function(){var t=this.vlambda;i.set(t,0,0),this.wlambda=0},l.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;i.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},l.prototype.applyDamping=function(t){if(this.type===l.DYNAMIC){var e=this.velocity;i.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},l.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=l.AWAKE,this.idleTime=0,t!==l.AWAKE&&this.emit(l.wakeUpEvent)},l.prototype.sleep=function(){this.sleepState=l.SLEEPING,this.angularVelocity=0,this.angularForce=0,i.set(this.velocity,0,0),i.set(this.force,0,0),this.emit(l.sleepEvent)},l.prototype.sleepTick=function(t,e,o){if(this.allowSleep&&this.type!==l.SLEEPING){this.wantsToSleep=!1;this.sleepState;i.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=l.AWAKE):(this.idleTime+=o,this.sleepState=l.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep())}},l.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var w=i.create(),P=i.create();l.prototype.integrate=function(t){var e=this.invMass,o=this.force,n=this.position,r=this.velocity;i.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),i.scale(w,o,t*e),i.multiply(w,this.massMultiplier,w),i.add(r,w,r),this.integrateToTimeOfImpact(t)||(i.scale(P,r,t),i.add(n,n,P),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var S=new s,x=new a({mode:a.ALL}),q=i.create(),L=i.create(),M=i.create(),C=i.create();l.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||i.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;i.normalize(q,this.velocity),i.scale(L,this.velocity,t),i.add(L,L,this.position),i.sub(M,L,this.position);var e,o=this.angularVelocity*t,n=i.length(M),r=1,s=this;if(S.reset(),x.callback=function(t){t.body!==s&&(e=t.body,t.getHitPoint(L,x),i.sub(M,L,s.position),r=i.length(M)/n,t.stop())},i.copy(x.from,this.position),i.copy(x.to,L),x.update(),this.world.raycast(S,x),!e)return!1;var a=this.angle;i.copy(C,this.position);for(var c=0,h=0,l=0,p=r;p>=h&&c<this.ccdIterations;){c++,l=(p-h)/2,i.scale(P,M,r),i.add(this.position,C,P),this.angle=a+o*r,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?h=l:p=l}return r=l,i.copy(this.position,C),this.angle=a,i.scale(P,M,r),i.add(this.position,this.position,P),this.fixedRotation||(this.angle+=o*r),!0},l.prototype.getVelocityAtPoint=function(t,e){return i.crossVZ(t,e,this.angularVelocity),i.subtract(t,this.velocity,t),t},l.sleepyEvent={type:"sleepy"},l.sleepEvent={type:"sleep"},l.wakeUpEvent={type:"wakeup"},l.DYNAMIC=1,l.STATIC=2,l.KINEMATIC=4,l.AWAKE=0,l.SLEEPY=1,l.SLEEPING=2},function(t,e,o){t.exports=n;var i=o(2);function n(t,e,o,n){this.type=o,n=i.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(t){for(var e=this.equations,o=0;o!==e.length;o++){var i=e[o];i.stiffness=t,i.needsUpdate=!0}},n.prototype.setRelaxation=function(t){for(var e=this.equations,o=0;o!==e.length;o++){var i=e[o];i.relaxation=t,i.needsUpdate=!0}}},function(t,e){function o(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}t.exports=o,o.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},o.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},o.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},function(t,e){function o(t,e,o){o=o||0;var i,n,r,s,a,c,h,l=[0,0];return i=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=i*t[0][0]+n*t[0][1],s=e[1][1]-e[0][1],a=e[0][0]-e[1][0],c=s*e[0][0]+a*e[0][1],B(h=i*a-s*n,0,o)||(l[0]=(a*r-n*c)/h,l[1]=(i*c-s*r)/h),l}function i(t,e,o,i){var n=e[0]-t[0],r=e[1]-t[1],s=i[0]-o[0],a=i[1]-o[1];if(s*r-a*n==0)return!1;var c=(n*(o[1]-t[1])+r*(t[0]-o[0]))/(s*r-a*n),h=(s*(t[1]-o[1])+a*(o[0]-t[0]))/(a*n-s*r);return c>=0&&c<=1&&h>=0&&h<=1}function n(t,e,o){return(e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1])}function r(t,e,o){return n(t,e,o)>0}function s(t,e,o){return n(t,e,o)>=0}function a(t,e,o){return n(t,e,o)<0}function c(t,e,o){return n(t,e,o)<=0}t.exports={decomp:function(t){var e=function t(e){var o=[],i=[],n=[],r=[];var s=Number.MAX_VALUE;for(var a=0;a<e.length;++a)if(v(e,a))for(var c=0;c<e.length;++c)if(m(e,a,c)){i=t(A(e,a,c,r)),n=t(A(e,c,a,r));for(var h=0;h<n.length;h++)i.push(n[h]);i.length<s&&(o=i,s=i.length,o.push([d(e,a),d(e,c)]))}return o}(t);return e.length>0?function t(e,o){if(0===o.length)return[e];if(o instanceof Array&&o.length&&o[0]instanceof Array&&2===o[0].length&&o[0][0]instanceof Array){for(var i=[e],n=0;n<o.length;n++)for(var r=o[n],s=0;s<i.length;s++){var a=i[s],c=t(a,r);if(c){i.splice(s,1),i.push(c[0],c[1]);break}}return i}var r=o,n=e.indexOf(r[0]),s=e.indexOf(r[1]);return-1!==n&&-1!==s&&[A(e,n,s),A(e,s,n)]}(t,e):[t]},quickDecomp:function t(e,o,i,n,h,l,p){l=l||100;p=p||0;h=h||25;o=void 0!==o?o:[];i=i||[];n=n||[];var g=[0,0],y=[0,0],m=[0,0];var A=0,B=0,w=0,P=0;var S=0,x=0,q=0;var L=[],M=[];var C=e,F=e;if(F.length<3)return o;p++;if(p>l)return console.warn("quickDecomp: max level ("+l+") reached."),o;for(var I=0;I<e.length;++I)if(v(C,I)){i.push(C[I]),A=B=Number.MAX_VALUE;for(var V=0;V<e.length;++V)r(d(C,I-1),d(C,I),d(C,V))&&c(d(C,I-1),d(C,I),d(C,V-1))&&(m=E(d(C,I-1),d(C,I),d(C,V),d(C,V-1)),a(d(C,I+1),d(C,I),m)&&(w=u(C[I],m))<B&&(B=w,y=m,x=V)),r(d(C,I+1),d(C,I),d(C,V+1))&&c(d(C,I+1),d(C,I),d(C,V))&&(m=E(d(C,I+1),d(C,I),d(C,V),d(C,V+1)),r(d(C,I-1),d(C,I),m)&&(w=u(C[I],m))<A&&(A=w,g=m,S=V));if(x===(S+1)%e.length)m[0]=(y[0]+g[0])/2,m[1]=(y[1]+g[1])/2,n.push(m),I<S?(f(L,C,I,S+1),L.push(m),M.push(m),0!==x&&f(M,C,x,C.length),f(M,C,0,I+1)):(0!==I&&f(L,C,I,C.length),f(L,C,0,S+1),L.push(m),M.push(m),f(M,C,x,I+1));else{if(x>S&&(S+=e.length),P=Number.MAX_VALUE,S<x)return o;for(var V=x;V<=S;++V)s(d(C,I-1),d(C,I),d(C,V))&&c(d(C,I+1),d(C,I),d(C,V))&&(w=u(d(C,I),d(C,V)))<P&&b(C,I,V)&&(P=w,q=V%e.length);I<q?(f(L,C,I,q+1),0!==q&&f(M,C,q,F.length),f(M,C,0,I+1)):(0!==I&&f(L,C,I,F.length),f(L,C,0,q+1),f(M,C,q,I+1))}return L.length<M.length?(t(L,o,i,n,h,l,p),t(M,o,i,n,h,l,p)):(t(M,o,i,n,h,l,p),t(L,o,i,n,h,l,p)),o}o.push(e);return o},isSimple:function(t){var e,o=t;for(e=0;e<o.length-1;e++)for(var n=0;n<e-1;n++)if(i(o[e],o[e+1],o[n],o[n+1]))return!1;for(e=1;e<o.length-2;e++)if(i(o[0],o[o.length-1],o[e],o[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var o=0,i=t.length-1;t.length>3&&i>=0;--i)p(d(t,i-1),d(t,i),d(t,i+1),e)&&(t.splice(i%t.length,1),o++);return o},removeDuplicatePoints:function(t,e){for(var o=t.length-1;o>=1;--o)for(var i=t[o],n=o-1;n>=0;--n)w(i,t[n],e)&&t.splice(o,1)},makeCCW:function(t){for(var e=0,o=t,i=1;i<t.length;++i)(o[i][1]<o[e][1]||o[i][1]===o[e][1]&&o[i][0]>o[e][0])&&(e=i);return!r(d(t,e-1),d(t,e),d(t,e+1))&&(function(t){for(var e=[],o=t.length,i=0;i!==o;i++)e.push(t.pop());for(var i=0;i!==o;i++)t[i]=e[i]}(t),!0)}};var h=[],l=[];function p(t,e,o,i){if(i){var r=h,s=l;r[0]=e[0]-t[0],r[1]=e[1]-t[1],s[0]=o[0]-e[0],s[1]=o[1]-e[1];var a=r[0]*s[0]+r[1]*s[1],c=Math.sqrt(r[0]*r[0]+r[1]*r[1]),p=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.acos(a/(c*p))<i}return 0===n(t,e,o)}function u(t,e){var o=e[0]-t[0],i=e[1]-t[1];return o*o+i*i}function d(t,e){var o=t.length;return t[e<0?e%o+o:e%o]}function f(t,e,o,i){for(var n=o;n<i;n++)t.push(e[n])}function v(t,e){return a(d(t,e-1),d(t,e),d(t,e+1))}var g=[],y=[];function m(t,e,i){var n,r,a=g,h=y;if(s(d(t,e+1),d(t,e),d(t,i))&&c(d(t,e-1),d(t,e),d(t,i)))return!1;r=u(d(t,e),d(t,i));for(var l=0;l!==t.length;++l)if((l+1)%t.length!==e&&l!==e&&s(d(t,e),d(t,i),d(t,l+1))&&c(d(t,e),d(t,i),d(t,l))&&(a[0]=d(t,e),a[1]=d(t,i),h[0]=d(t,l),h[1]=d(t,l+1),n=o(a,h),u(d(t,e),n)<r))return!1;return!0}function b(t,e,o){for(var n=0;n!==t.length;++n)if(n!==e&&n!==o&&(n+1)%t.length!==e&&(n+1)%t.length!==o&&i(d(t,e),d(t,o),d(t,n),d(t,n+1)))return!1;return!0}function A(t,e,o,i){var n=i||[];if(function(t){t.length=0}(n),e<o)for(var r=e;r<=o;r++)n.push(t[r]);else{for(r=0;r<=o;r++)n.push(t[r]);for(r=e;r<t.length;r++)n.push(t[r])}return n}function E(t,e,o,i,n){n=n||0;var r=e[1]-t[1],s=t[0]-e[0],a=r*t[0]+s*t[1],c=i[1]-o[1],h=o[0]-i[0],l=c*o[0]+h*o[1],p=r*h-c*s;return B(p,0,n)?[0,0]:[(h*a-s*l)/p,(r*l-c*a)/p]}function B(t,e,o){return o=o||0,Math.abs(t-e)<=o}function w(t,e,o){return B(t[0],e[0],o)&&B(t[1],e[1],o)}},function(t,e,o){var i=o(4),n=o(0),r=o(53);o(25);function s(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],o=0;o<e.length;o++){var r=n.create();n.copy(r,e[o]),this.vertices.push(r)}if(this.axes=[],t.axes)for(o=0;o<t.axes.length;o++){var s=n.create();n.copy(s,t.axes[o]),this.axes.push(s)}else for(o=0;o<this.vertices.length;o++){var a=this.vertices[o],c=this.vertices[(o+1)%this.vertices.length],h=n.create();n.sub(h,c,a),n.rotate90cw(h,h),n.normalize(h,h),this.axes.push(h)}if(this.centerOfMass=n.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=i.CONVEX,i.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}t.exports=s,s.prototype=new i,s.prototype.constructor=s;var a=n.create(),c=n.create();s.prototype.projectOntoLocalAxis=function(t,e){for(var o,i,r=null,s=null,c=(t=a,0);c<this.vertices.length;c++)o=this.vertices[c],i=n.dot(o,t),(null===r||i>r)&&(r=i),(null===s||i<s)&&(s=i);if(s>r){var h=s;s=r,r=h}n.set(e,s,r)},s.prototype.projectOntoWorldAxis=function(t,e,o,i){var r=c;this.projectOntoLocalAxis(t,i),0!==o?n.rotate(r,t,o):r=t;var s=n.dot(e,r);n.set(i,i[0]+s,i[1]+s)},s.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var o=this.vertices[e];t.push(o[0],o[1])}var i=r.Triangulate(t);for(e=0;e<i.length;e+=3){var n=i[e],s=i[e+1],a=i[e+2];this.triangles.push([n,s,a])}};var h=n.create(),l=n.create(),p=n.create(),u=n.create(),d=n.create();n.create(),n.create(),n.create(),n.create();s.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,o=this.centerOfMass,i=h,r=p,a=u,c=d,f=l;n.set(o,0,0);for(var v=0,g=0;g!==t.length;g++){var y=t[g];r=e[y[0]],a=e[y[1]],c=e[y[2]];n.centroid(i,r,a,c);var m=s.triangleArea(r,a,c);v+=m,n.scale(f,i,m),n.add(o,o,f)}n.scale(o,o,1/v)},s.prototype.computeMomentOfInertia=function(t){for(var e=0,o=0,i=this.vertices.length,r=i-1,s=0;s<i;r=s,s++){var a=this.vertices[r],c=this.vertices[s],h=Math.abs(n.crossLength(a,c));e+=h*(n.dot(c,c)+n.dot(c,a)+n.dot(a,a)),o+=h}return t/6*(e/o)},s.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,o=0;o!==t.length;o++){var i=n.squaredLength(t[o]);i>e&&(e=i)}this.boundingRadius=Math.sqrt(e)},s.triangleArea=function(t,e,o){return.5*((e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1]))},s.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,o=0;o!==t.length;o++){var i=t[o],n=e[i[0]],r=e[i[1]],a=e[i[2]],c=s.triangleArea(n,r,a);this.area+=c}},s.prototype.computeAABB=function(t,e,o){t.setFromPoints(this.vertices,e,o,0)};var f=n.create(),v=n.create(),g=n.create();s.prototype.raycast=function(t,e,o,i){var r=f,s=v,a=g,c=this.vertices;n.toLocalFrame(r,e.from,o,i),n.toLocalFrame(s,e.to,o,i);for(var h=c.length,l=0;l<h&&!t.shouldStop(e);l++){var p=c[l],u=c[(l+1)%h],d=n.getLineSegmentsIntersectionFraction(r,s,p,u);d>=0&&(n.sub(a,u,p),n.rotate(a,a,-Math.PI/2+i),n.normalize(a,a),e.reportIntersection(t,d,a,l))}}},function(t,e,o){var i=o(0),n=o(3);o(2);function r(t,e,o){n.call(this,t,e,-o,o),this.contactPointA=i.create(),this.contactPointB=i.create(),this.t=i.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},r.prototype.getSlipForce=function(){return this.maxForce},r.prototype.computeB=function(t,e,o){this.bodyA,this.bodyB;var n=this.contactPointA,r=this.contactPointB,s=this.t,a=this.G;return a[0]=-s[0],a[1]=-s[1],a[2]=-i.crossLength(n,s),a[3]=s[0],a[4]=s[1],a[5]=i.crossLength(r,s),-this.computeGW()*e-o*this.computeGiMf()}},function(t,e,o){var i=o(0);o(2);function n(t){this.lowerBound=i.create(),t&&t.lowerBound&&i.copy(this.lowerBound,t.lowerBound),this.upperBound=i.create(),t&&t.upperBound&&i.copy(this.upperBound,t.upperBound)}t.exports=n;var r=i.create();n.prototype.setFromPoints=function(t,e,o,n){var s=this.lowerBound,a=this.upperBound;"number"!=typeof o&&(o=0),0!==o?i.rotate(s,t[0],o):i.copy(s,t[0]),i.copy(a,s);for(var c=Math.cos(o),h=Math.sin(o),l=1;l<t.length;l++){var p=t[l];if(0!==o){var u=p[0],d=p[1];r[0]=c*u-h*d,r[1]=h*u+c*d,p=r}for(var f=0;f<2;f++)p[f]>a[f]&&(a[f]=p[f]),p[f]<s[f]&&(s[f]=p[f])}e&&(i.add(this.lowerBound,this.lowerBound,e),i.add(this.upperBound,this.upperBound,e)),n&&(this.lowerBound[0]-=n,this.lowerBound[1]-=n,this.upperBound[0]+=n,this.upperBound[1]+=n)},n.prototype.copy=function(t){i.copy(this.lowerBound,t.lowerBound),i.copy(this.upperBound,t.upperBound)},n.prototype.extend=function(t){for(var e=2;e--;){var o=t.lowerBound[e];this.lowerBound[e]>o&&(this.lowerBound[e]=o);var i=t.upperBound[e];this.upperBound[e]<i&&(this.upperBound[e]=i)}},n.prototype.overlaps=function(t){var e=this.lowerBound,o=this.upperBound,i=t.lowerBound,n=t.upperBound;return(i[0]<=o[0]&&o[0]<=n[0]||e[0]<=n[0]&&n[0]<=o[0])&&(i[1]<=o[1]&&o[1]<=n[1]||e[1]<=n[1]&&n[1]<=o[1])},n.prototype.containsPoint=function(t){var e=this.lowerBound,o=this.upperBound;return e[0]<=t[0]&&t[0]<=o[0]&&e[1]<=t[1]&&t[1]<=o[1]},n.prototype.overlapsRay=function(t){var e=1/t.direction[0],o=1/t.direction[1],i=(this.lowerBound[0]-t.from[0])*e,n=(this.upperBound[0]-t.from[0])*e,r=(this.lowerBound[1]-t.from[1])*o,s=(this.upperBound[1]-t.from[1])*o,a=Math.max(Math.max(Math.min(i,n),Math.min(r,s))),c=Math.min(Math.min(Math.max(i,n),Math.max(r,s)));return c<0?-1:a>c?-1:a}},function(t,e,o){t.exports=n;var i=o(0);o(18),o(4),o(12);function n(t){t=t||{},this.from=t.from?i.fromValues(t.from[0],t.from[1]):i.create(),this.to=t.to?i.fromValues(t.to[0],t.to[1]):i.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:n.ANY,this.callback=t.callback||function(t){},this.direction=i.create(),this.length=1,this.update()}n.prototype.constructor=n,n.CLOSEST=1,n.ANY=2,n.ALL=4,n.prototype.update=function(){var t=this.direction;i.sub(t,this.to,this.from),this.length=i.length(t),i.normalize(t,t)},n.prototype.intersectBodies=function(t,e){for(var o=0,i=e.length;!t.shouldStop(this)&&o<i;o++){var n=e[o],r=n.getAABB();(r.overlapsRay(this)>=0||r.containsPoint(this.from))&&this.intersectBody(t,n)}};var r=i.create();n.prototype.intersectBody=function(t,e){var o=this.checkCollisionResponse;if(!o||e.collisionResponse)for(var n=r,s=0,a=e.shapes.length;s<a;s++){var c=e.shapes[s];if((!o||c.collisionResponse)&&(0!=(this.collisionGroup&c.collisionMask)&&0!=(c.collisionGroup&this.collisionMask))){i.rotate(n,c.position,e.angle),i.add(n,n,e.position);var h=c.angle+e.angle;if(this.intersectShape(t,c,h,n,e),t.shouldStop(this))break}}},n.prototype.intersectShape=function(t,e,o,n,r){(function(t,e,o){i.sub(s,o,t);var n=i.dot(s,e);return i.scale(a,e,n),i.add(a,a,t),i.squaredDistance(o,a)})(this.from,this.direction,n)>e.boundingRadius*e.boundingRadius||(this._currentBody=r,this._currentShape=e,e.raycast(t,this,n,o),this._currentBody=this._currentShape=null)},n.prototype.getAABB=function(t){var e=this.to,o=this.from;i.set(t.lowerBound,Math.min(e[0],o[0]),Math.min(e[1],o[1])),i.set(t.upperBound,Math.max(e[0],o[0]),Math.max(e[1],o[1]))};i.create();n.prototype.reportIntersection=function(t,e,o,r){this.from,this.to;var s=this._currentShape,a=this._currentBody;if(!(this.skipBackfaces&&i.dot(o,this.direction)>0))switch(this.mode){case n.ALL:t.set(o,s,a,e,r),this.callback(t);break;case n.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(o,s,a,e,r);break;case n.ANY:t.set(o,s,a,e,r)}};var s=i.create(),a=i.create()},function(t,e){var o=function(){};t.exports=o,o.prototype={constructor:o,on:function(t,e,o){e.context=o||this,void 0===this._listeners&&(this._listeners={});var i=this._listeners;return void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var o=this._listeners;if(e){if(void 0!==o[t]&&-1!==o[t].indexOf(e))return!0}else if(void 0!==o[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var o=this._listeners,i=o[t].indexOf(e);return-1!==i&&o[t].splice(i,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var o=0,i=e.length;o<i;o++){var n=e[o];n.call(n.context,t)}}return this}}},function(t,e,o){var i=o(0),n=o(6);function r(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=r.AABB}t.exports=r,r.AABB=1,r.BOUNDING_CIRCLE=2,r.prototype.setWorld=function(t){this.world=t},r.prototype.getCollisionPairs=function(t){};var s=i.create();r.boundingRadiusCheck=function(t,e){i.sub(s,t.position,e.position);var o=i.squaredLength(s),n=t.boundingRadius+e.boundingRadius;return o<=n*n},r.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},r.prototype.boundingVolumeCheck=function(t,e){var o;switch(this.boundingVolumeType){case r.BOUNDING_CIRCLE:o=r.boundingRadiusCheck(t,e);break;case r.AABB:o=r.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return o},r.canCollide=function(t,e){var o=n.KINEMATIC,i=n.STATIC;return(t.type!==i||e.type!==i)&&(!(t.type===o&&e.type===i||t.type===i&&e.type===o)&&((t.type!==o||e.type!==o)&&((t.sleepState!==n.SLEEPING||e.sleepState!==n.SLEEPING)&&!(t.sleepState===n.SLEEPING&&e.type===i||e.sleepState===n.SLEEPING&&t.type===i))))},r.NAIVE=1,r.SAP=2},function(t,e,o){var i=o(4),n=o(0);function r(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=i.CIRCLE,i.call(this,t)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},r.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},r.prototype.computeAABB=function(t,e,o){var i=this.radius;n.set(t.upperBound,i,i),n.set(t.lowerBound,-i,-i),e&&(n.add(t.lowerBound,t.lowerBound,e),n.add(t.upperBound,t.upperBound,e))};var s=n.create(),a=n.create();r.prototype.raycast=function(t,e,o,i){var r=e.from,c=e.to,h=this.radius,l=Math.pow(c[0]-r[0],2)+Math.pow(c[1]-r[1],2),p=2*((c[0]-r[0])*(r[0]-o[0])+(c[1]-r[1])*(r[1]-o[1])),u=Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)-Math.pow(h,2),d=Math.pow(p,2)-4*l*u,f=s,v=a;if(!(d<0))if(0===d)n.lerp(f,r,c,d),n.sub(v,f,o),n.normalize(v,v),e.reportIntersection(t,d,v,-1);else{var g=Math.sqrt(d),y=1/(2*l),m=(-p-g)*y,b=(-p+g)*y;if(m>=0&&m<=1&&(n.lerp(f,r,c,m),n.sub(v,f,o),n.normalize(v,v),e.reportIntersection(t,m,v,-1),t.shouldStop(e)))return;b>=0&&b<=1&&(n.lerp(f,r,c,b),n.sub(v,f,o),n.normalize(v,v),e.reportIntersection(t,b,v,-1))}}},function(t,e,o){var i=o(3),n=o(0);function r(t,e){i.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=n.create(),this.penetrationVec=n.create(),this.contactPointB=n.create(),this.normalA=n.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.computeB=function(t,e,o){var i,r,s=this.bodyA,a=this.bodyB,c=this.contactPointA,h=this.contactPointB,l=s.position,p=a.position,u=this.penetrationVec,d=this.normalA,f=this.G,v=n.crossLength(c,d),g=n.crossLength(h,d);return f[0]=-d[0],f[1]=-d[1],f[2]=-v,f[3]=d[0],f[4]=d[1],f[5]=g,n.add(u,p,h),n.sub(u,u,l),n.sub(u,u,c),this.firstImpact&&0!==this.restitution?(r=0,i=1/e*(1+this.restitution)*this.computeGW()):(r=n.dot(d,u)+this.offset,i=this.computeGW()),-r*t-i*e-o*this.computeGiMf()};var s=n.create(),a=n.create(),c=n.create();r.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(s,this.contactPointA),this.bodyB.getVelocityAtPoint(a,this.contactPointB),n.subtract(c,s,a),n.dot(this.normalA,c)}},function(t,e,o){var i=o(0),n=o(13);function r(){this.normal=i.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}t.exports=r,r.prototype.reset=function(){i.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},r.prototype.getHitDistance=function(t){return i.distance(t.from,t.to)*this.fraction},r.prototype.hasHit=function(){return-1!==this.fraction},r.prototype.getHitPoint=function(t,e){i.lerp(t,e.from,e.to,this.fraction)},r.prototype.stop=function(){this.isStopped=!0},r.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===n.ANY},r.prototype.set=function(t,e,o,n,r){i.copy(this.normal,t),this.shape=e,this.body=o,this.fraction=n,this.faceIndex=r}},function(t,e){function o(t){this.id=t||o.idCounter++}t.exports=o,o.idCounter=0},function(t,e,o){o(2);var i=o(14);function n(t,e){t=t||{},i.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var r={bodies:[]};n.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),r.bodies.length=0,e.getBodies(r.bodies),r.bodies.length&&this.solve(t,r))},n.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},n.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},n.prototype.addEquations=function(t){for(var e=0,o=t.length;e!==o;e++){var i=t[e];i.enabled&&this.equations.push(i)}},n.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},n.prototype.removeAllEquations=function(){this.equations.length=0},n.GS=1,n.ISLAND=2},function(t,e,o){var i=o(4),n=o(0);o(2);function r(t){(t=t||{}).type=i.PLANE,i.call(this,t)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){return 0},r.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},r.prototype.computeAABB=function(t,e,o){var i=o%(2*Math.PI),r=n.set,s=t.lowerBound,a=t.upperBound;r(s,-1e7,-1e7),r(a,1e7,1e7),0===i?a[1]=0:i===Math.PI/2?s[0]=0:i===Math.PI?s[1]=0:i===3*Math.PI/2&&(a[0]=0)},r.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var s=n.create(),a=(n.create(),n.create(),n.create()),c=n.create();r.prototype.raycast=function(t,e,o,i){var r=e.from,h=e.to,l=e.direction,p=s,u=a,d=c;n.set(u,0,1),n.rotate(u,u,i),n.sub(d,r,o);var f=n.dot(d,u);if(n.sub(d,h,o),!(f*n.dot(d,u)>0||n.squaredDistance(r,h)<f*f)){var v=n.dot(u,l);n.sub(p,r,o);var g=-n.dot(u,p)/v/e.length;e.reportIntersection(t,g,u,-1)}}},function(t,e,o){var i=o(4),n=o(0);function r(t){(t=t||{}).type=i.PARTICLE,i.call(this,t)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){return 0},r.prototype.updateBoundingRadius=function(){this.boundingRadius=0},r.prototype.computeAABB=function(t,e,o){n.copy(t.lowerBound,e),n.copy(t.upperBound,e)}},function(t,e,o){o(0);var i=o(2);function n(t,e,o){o=i.defaults(o,{stiffness:100,damping:1}),this.stiffness=o.stiffness,this.damping=o.damping,this.bodyA=t,this.bodyB=e}t.exports=n,n.prototype.applyForce=function(){}},function(t,e,o){var i=o(3);o(0);function n(t,e,o){o=o||{},i.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0,this.ratio="number"==typeof o.ratio?o.ratio:1,this.setRatio(this.ratio)}t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},n.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},n.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},function(t,e,o){t.exports={Polygon:o(51),Point:o(27)}},function(t,e){function o(){}t.exports=o,o.eq=function(t,e,o){return o=o||0,Math.abs(t-e)<o}},function(t,e){function o(){}t.exports=o,o.area=function(t,e,o){return(e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1])},o.left=function(t,e,i){return o.area(t,e,i)>0},o.leftOn=function(t,e,i){return o.area(t,e,i)>=0},o.right=function(t,e,i){return o.area(t,e,i)<0},o.rightOn=function(t,e,i){return o.area(t,e,i)<=0};var i=[],n=[];o.collinear=function(t,e,r,s){if(s){var a=i,c=n;a[0]=e[0]-t[0],a[1]=e[1]-t[1],c[0]=r[0]-e[0],c[1]=r[1]-e[1];var h=a[0]*c[0]+a[1]*c[1],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=Math.sqrt(c[0]*c[0]+c[1]*c[1]);return Math.acos(h/(l*p))<s}return 0==o.area(t,e,r)},o.sqdist=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return o*o+i*i}},function(t,e,o){var i=o(4),n=o(0);function r(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=i.CAPSULE,i.call(this,t)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){var e=this.radius,o=this.length+e,i=2*e;return t*(i*i+o*o)/12},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},r.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var s=n.create();r.prototype.computeAABB=function(t,e,o){var i=this.radius;n.set(s,this.length/2,0),0!==o&&n.rotate(s,s,o),n.set(t.upperBound,Math.max(s[0]+i,-s[0]+i),Math.max(s[1]+i,-s[1]+i)),n.set(t.lowerBound,Math.min(s[0]-i,-s[0]-i),Math.min(s[1]-i,-s[1]-i)),n.add(t.lowerBound,t.lowerBound,e),n.add(t.upperBound,t.upperBound,e)};var a=n.create(),c=n.create(),h=n.create(),l=n.create(),p=n.fromValues(0,1);r.prototype.raycast=function(t,e,o,i){for(var r=e.from,s=e.to,u=(e.direction,a),d=c,f=h,v=l,g=this.length/2,y=0;y<2;y++){var m=this.radius*(2*y-1);if(n.set(f,-g,m),n.set(v,g,m),n.toGlobalFrame(f,f,o,i),n.toGlobalFrame(v,v,o,i),(A=n.getLineSegmentsIntersectionFraction(r,s,f,v))>=0&&(n.rotate(d,p,i),n.scale(d,d,2*y-1),e.reportIntersection(t,A,d,-1),t.shouldStop(e)))return}var b=Math.pow(this.radius,2)+Math.pow(g,2);for(y=0;y<2;y++){n.set(f,g*(2*y-1),0),n.toGlobalFrame(f,f,o,i);var A,E=Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2),B=2*((s[0]-r[0])*(r[0]-f[0])+(s[1]-r[1])*(r[1]-f[1])),w=Math.pow(r[0]-f[0],2)+Math.pow(r[1]-f[1],2)-Math.pow(this.radius,2);if(!((A=Math.pow(B,2)-4*E*w)<0))if(0===A){if(n.lerp(u,r,s,A),n.squaredDistance(u,o)>b&&(n.sub(d,u,f),n.normalize(d,d),e.reportIntersection(t,A,d,-1),t.shouldStop(e)))return}else{var P=Math.sqrt(A),S=1/(2*E),x=(-B-P)*S,q=(-B+P)*S;if(x>=0&&x<=1&&(n.lerp(u,r,s,x),n.squaredDistance(u,o)>b&&(n.sub(d,u,f),n.normalize(d,d),e.reportIntersection(t,x,d,-1),t.shouldStop(e))))return;if(q>=0&&q<=1&&(n.lerp(u,r,s,q),n.squaredDistance(u,o)>b&&(n.sub(d,u,f),n.normalize(d,d),e.reportIntersection(t,q,d,-1),t.shouldStop(e))))return}}}},function(t,e,o){var i=o(17),n=o(8);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new i},r.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,o){var i=o(19),n=o(3);function r(t,e,o){if(o=o||{},!(t instanceof i&&e instanceof i))throw new Error("First two arguments must be Material instances.");this.id=r.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==o.friction?Number(o.friction):.3,this.restitution=void 0!==o.restitution?Number(o.restitution):0,this.stiffness=void 0!==o.stiffness?Number(o.stiffness):n.DEFAULT_STIFFNESS,this.relaxation=void 0!==o.relaxation?Number(o.relaxation):n.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==o.frictionStiffness?Number(o.frictionStiffness):n.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==o.frictionRelaxation?Number(o.frictionRelaxation):n.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==o.surfaceVelocity?Number(o.surfaceVelocity):0,this.contactSkinSize=.005}t.exports=r,r.idCounter=0},function(t,e,o){var i=o(7),n=o(3),r=o(0),s=o(2);function a(t,e,o){o=s.defaults(o,{localAnchorA:[0,0],localAnchorB:[0,0]}),i.call(this,t,e,i.DISTANCE,o),this.localAnchorA=r.fromValues(o.localAnchorA[0],o.localAnchorA[1]),this.localAnchorB=r.fromValues(o.localAnchorB[0],o.localAnchorB[1]);var a,c=this.localAnchorA,h=this.localAnchorB;if(this.distance=0,"number"==typeof o.distance)this.distance=o.distance;else{var l=r.create(),p=r.create(),u=r.create();r.rotate(l,c,t.angle),r.rotate(p,h,e.angle),r.add(u,e.position,p),r.sub(u,u,l),r.sub(u,u,t.position),this.distance=r.length(u)}a=void 0===o.maxForce?Number.MAX_VALUE:o.maxForce;var d=new n(t,e,-a,a);this.equations=[d],this.maxForce=a;u=r.create();var f=r.create(),v=r.create(),g=this;d.computeGq=function(){var t=this.bodyA,e=this.bodyB,o=t.position,i=e.position;return r.rotate(f,c,t.angle),r.rotate(v,h,e.angle),r.add(u,i,v),r.sub(u,u,f),r.sub(u,u,o),r.length(u)-g.distance},this.setMaxForce(a),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}t.exports=a,a.prototype=new i,a.prototype.constructor=a;var c=r.create(),h=r.create(),l=r.create();a.prototype.update=function(){var t=this.equations[0],e=this.bodyA,o=this.bodyB,i=(this.distance,e.position),n=o.position,s=this.equations[0],a=t.G;r.rotate(h,this.localAnchorA,e.angle),r.rotate(l,this.localAnchorB,o.angle),r.add(c,n,l),r.sub(c,c,h),r.sub(c,c,i),this.position=r.length(c);var p=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(s.maxForce=0,s.minForce=-this.maxForce,this.distance=this.upperLimit,p=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(s.maxForce=this.maxForce,s.minForce=0,this.distance=this.lowerLimit,p=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||p){s.enabled=!0,r.normalize(c,c);var u=r.crossLength(h,c),d=r.crossLength(l,c);a[0]=-c[0],a[1]=-c[1],a[2]=-u,a[3]=c[0],a[4]=c[1],a[5]=d}else s.enabled=!1},a.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},a.prototype.getMaxForce=function(){return this.equations[0].maxForce}},function(t,e,o){var i=o(11),n=o(8);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new i},r.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,o){var i=o(7),n=(o(3),o(24));o(0);function r(t,e,o){o=o||{},i.call(this,t,e,i.GEAR,o),this.ratio=void 0!==o.ratio?o.ratio:1,this.angle=void 0!==o.angle?o.angle:e.angle-this.ratio*t.angle,o.angle=this.angle,o.ratio=this.ratio,this.equations=[new n(t,e,o)],void 0!==o.maxTorque&&this.setMaxTorque(o.maxTorque)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},r.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},r.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},function(t,e,o){var i=o(0),n=o(20),r=o(2),s=o(11);function a(t){n.call(this,t,n.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new r.ARRAY_TYPE(this.arrayStep),this.Bs=new r.ARRAY_TYPE(this.arrayStep),this.invCs=new r.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.solve=function(t,e){this.sortEquations();var o=0,n=this.iterations,c=this.frictionIterations,h=this.equations,l=h.length,p=Math.pow(this.tolerance*l,2),u=e.bodies,d=e.bodies.length,f=(i.add,i.set,this.useZeroRHS),v=this.lambda;if(this.usedIterations=0,l)for(var g=0;g!==d;g++){u[g].updateSolveMassProperties()}v.length<l&&(v=this.lambda=new r.ARRAY_TYPE(l+this.arrayStep),this.Bs=new r.ARRAY_TYPE(l+this.arrayStep),this.invCs=new r.ARRAY_TYPE(l+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(v);var y,m,b=this.invCs,A=this.Bs;for(v=this.lambda,g=0;g!==h.length;g++){var E;((E=h[g]).timeStep!==t||E.needsUpdate)&&(E.timeStep=t,E.update()),A[g]=E.computeB(E.a,E.b,t),b[g]=E.computeInvC(E.epsilon)}if(0!==l){for(g=0;g!==d;g++){u[g].resetConstraintVelocity()}if(c){for(o=0;o!==c;o++){for(y=0,m=0;m!==l;m++){E=h[m];var B=a.iterateEquation(m,E,E.epsilon,A,b,v,f,t,o);y+=Math.abs(B)}if(this.usedIterations++,y*y<=p)break}for(a.updateMultipliers(h,v,1/t),m=0;m!==l;m++){var w=h[m];if(w instanceof s){for(var P=0,S=0;S!==w.contactEquations.length;S++)P+=w.contactEquations[S].multiplier;P*=w.frictionCoefficient/w.contactEquations.length,w.maxForce=P,w.minForce=-P}}}for(o=0;o!==n;o++){for(y=0,m=0;m!==l;m++){E=h[m];B=a.iterateEquation(m,E,E.epsilon,A,b,v,f,t,o);y+=Math.abs(B)}if(this.usedIterations++,y*y<=p)break}for(g=0;g!==d;g++)u[g].addConstraintVelocity();a.updateMultipliers(h,v,1/t)}},a.updateMultipliers=function(t,e,o){for(var i=t.length;i--;)t[i].multiplier=e[i]*o},a.iterateEquation=function(t,e,o,i,n,r,s,a,c){var h=i[t],l=n[t],p=r[t],u=e.computeGWlambda(),d=e.maxForce,f=e.minForce;s&&(h=0);var v=l*(h-u-o*p),g=p+v;return g<f*a?v=f*a-p:g>d*a&&(v=d*a-p),r[t]+=v,e.addToWlambda(v),v}},function(t,e,o){var i=o(4),n=o(0);function r(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=i.LINE,i.call(this,t)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var s=[n.create(),n.create()];r.prototype.computeAABB=function(t,e,o){var i=this.length/2;n.set(s[0],-i,0),n.set(s[1],i,0),t.setFromPoints(s,e,o,0)};n.create();var a=n.create(),c=n.create(),h=n.create(),l=n.fromValues(0,1);r.prototype.raycast=function(t,e,o,i){var r=e.from,s=e.to,p=c,u=h,d=this.length/2;n.set(p,-d,0),n.set(u,d,0),n.toGlobalFrame(p,p,o,i),n.toGlobalFrame(u,u,o,i);var f=n.getLineSegmentsIntersectionFraction(p,u,r,s);if(f>=0){var v=a;n.rotate(v,l,i),e.reportIntersection(t,f,v,-1)}}},function(t,e,o){var i=o(7),n=o(0),r=o(3);function s(t,e,o){o=o||{},i.call(this,t,e,i.LOCK,o);var s=void 0===o.maxForce?Number.MAX_VALUE:o.maxForce,a=(o.localAngleB,new r(t,e,-s,s)),c=new r(t,e,-s,s),h=new r(t,e,-s,s),l=n.create(),p=n.create(),u=this;a.computeGq=function(){return n.rotate(l,u.localOffsetB,t.angle),n.sub(p,e.position,t.position),n.sub(p,p,l),p[0]},c.computeGq=function(){return n.rotate(l,u.localOffsetB,t.angle),n.sub(p,e.position,t.position),n.sub(p,p,l),p[1]};var d=n.create(),f=n.create();h.computeGq=function(){return n.rotate(d,u.localOffsetB,e.angle-u.localAngleB),n.scale(d,d,-1),n.sub(p,t.position,e.position),n.add(p,p,d),n.rotate(f,d,-Math.PI/2),n.normalize(f,f),n.dot(p,f)},this.localOffsetB=n.create(),o.localOffsetB?n.copy(this.localOffsetB,o.localOffsetB):(n.sub(this.localOffsetB,e.position,t.position),n.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof o.localAngleB?this.localAngleB=o.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(a,c,h),this.setMaxForce(s)}t.exports=s,s.prototype=new i,s.prototype.constructor=s,s.prototype.setMaxForce=function(t){for(var e=this.equations,o=0;o<this.equations.length;o++)e[o].maxForce=t,e[o].minForce=-t},s.prototype.getMaxForce=function(){return this.equations[0].maxForce};var a=n.create(),c=n.create(),h=n.create(),l=n.fromValues(1,0),p=n.fromValues(0,1);s.prototype.update=function(){var t=this.equations[0],e=this.equations[1],o=this.equations[2],i=this.bodyA,r=this.bodyB;n.rotate(a,this.localOffsetB,i.angle),n.rotate(c,this.localOffsetB,r.angle-this.localAngleB),n.scale(c,c,-1),n.rotate(h,c,Math.PI/2),n.normalize(h,h),t.G[0]=-1,t.G[1]=0,t.G[2]=-n.crossLength(a,l),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-n.crossLength(a,p),e.G[4]=1,o.G[0]=-h[0],o.G[1]=-h[1],o.G[3]=h[0],o.G[4]=h[1],o.G[5]=n.crossLength(c,h)}},function(t,e,o){var i=o(0),n=i.sub,r=i.add,s=i.dot,a=(o(2),o(29)),c=o(32),h=o(38),l=o(3),p=(o(17),o(11),o(16)),u=o(10),d=o(4),f=(o(6),o(39));t.exports=T;var v=i.fromValues(0,1),g=i.fromValues(0,0),y=i.fromValues(0,0),m=i.fromValues(0,0),b=i.fromValues(0,0),A=i.fromValues(0,0),E=i.fromValues(0,0),B=i.fromValues(0,0),w=i.fromValues(0,0),P=i.fromValues(0,0),S=i.fromValues(0,0),x=i.fromValues(0,0),q=i.fromValues(0,0),L=i.fromValues(0,0),M=i.fromValues(0,0),C=i.fromValues(0,0),F=i.fromValues(0,0),I=i.fromValues(0,0),V=i.fromValues(0,0),R=[];function T(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new a({size:32}),this.frictionEquationPool=new c({size:64}),this.restitution=0,this.stiffness=l.DEFAULT_STIFFNESS,this.relaxation=l.DEFAULT_RELAXATION,this.frictionStiffness=l.DEFAULT_STIFFNESS,this.frictionRelaxation=l.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new h,this.contactSkinSize=.01}var N=i.create(),O=i.create();function G(t,e){i.set(t.vertices[0],.5*-e.length,-e.radius),i.set(t.vertices[1],.5*e.length,-e.radius),i.set(t.vertices[2],.5*e.length,e.radius),i.set(t.vertices[3],.5*-e.length,e.radius)}T.prototype.bodiesOverlap=function(t,e){for(var o=N,i=O,n=0,r=t.shapes.length;n!==r;n++){var s=t.shapes[n];t.toWorldFrame(o,s.position);for(var a=0,c=e.shapes.length;a!==c;a++){var h=e.shapes[a];if(e.toWorldFrame(i,h.position),this[s.type|h.type](t,s,o,s.angle+t.angle,e,h,i,h.angle+e.angle,!0))return!0}}return!1},T.prototype.collidedLastStep=function(t,e){var o=0|t.id,i=0|e.id;return!!this.collidingBodiesLastStep.get(o,i)},T.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var o=t[e],i=o.bodyA.id,n=o.bodyB.id;this.collidingBodiesLastStep.set(i,n,!0)}for(var r=this.contactEquations,s=this.frictionEquations,a=0;a<r.length;a++)this.contactEquationPool.release(r[a]);for(a=0;a<s.length;a++)this.frictionEquationPool.release(s[a]);this.contactEquations.length=this.frictionEquations.length=0},T.prototype.createContactEquation=function(t,e,o,i){var n=this.contactEquationPool.get();return n.bodyA=t,n.bodyB=e,n.shapeA=o,n.shapeB=i,n.restitution=this.restitution,n.firstImpact=!this.collidedLastStep(t,e),n.stiffness=this.stiffness,n.relaxation=this.relaxation,n.needsUpdate=!0,n.enabled=this.enabledEquations,n.offset=this.contactSkinSize,n},T.prototype.createFrictionEquation=function(t,e,o,i){var n=this.frictionEquationPool.get();return n.bodyA=t,n.bodyB=e,n.shapeA=o,n.shapeB=i,n.setSlipForce(this.slipForce),n.frictionCoefficient=this.frictionCoefficient,n.relativeVelocity=this.surfaceVelocity,n.enabled=this.enabledEquations,n.needsUpdate=!0,n.stiffness=this.frictionStiffness,n.relaxation=this.frictionRelaxation,n.contactEquations.length=0,n},T.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return i.copy(e.contactPointA,t.contactPointA),i.copy(e.contactPointB,t.contactPointB),i.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},T.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],o=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),n=e.bodyA;e.bodyB;i.set(o.contactPointA,0,0),i.set(o.contactPointB,0,0),i.set(o.t,0,0);for(var r=0;r!==t;r++)(e=this.contactEquations[this.contactEquations.length-1-r]).bodyA===n?(i.add(o.t,o.t,e.normalA),i.add(o.contactPointA,o.contactPointA,e.contactPointA),i.add(o.contactPointB,o.contactPointB,e.contactPointB)):(i.sub(o.t,o.t,e.normalA),i.add(o.contactPointA,o.contactPointA,e.contactPointB),i.add(o.contactPointB,o.contactPointB,e.contactPointA)),o.contactEquations.push(e);var s=1/t;return i.scale(o.contactPointA,o.contactPointA,s),i.scale(o.contactPointB,o.contactPointB,s),i.normalize(o.t,o.t),i.rotate90cw(o.t,o.t),o},T.prototype[d.LINE|d.CONVEX]=T.prototype.convexLine=function(t,e,o,i,n,r,s,a,c){return!c&&0},T.prototype[d.LINE|d.BOX]=T.prototype.lineBox=function(t,e,o,i,n,r,s,a,c){return!c&&0};var k=new f({width:1,height:1}),_=i.create();T.prototype[d.CAPSULE|d.CONVEX]=T.prototype[d.CAPSULE|d.BOX]=T.prototype.convexCapsule=function(t,e,o,n,r,s,a,c,h){var l=_;i.set(l,s.length/2,0),i.rotate(l,l,c),i.add(l,l,a);var p=this.circleConvex(r,s,l,c,t,e,o,n,h,s.radius);i.set(l,-s.length/2,0),i.rotate(l,l,c),i.add(l,l,a);var u=this.circleConvex(r,s,l,c,t,e,o,n,h,s.radius);if(h&&(p||u))return!0;var d=k;return G(d,s),this.convexConvex(t,e,o,n,r,d,a,c,h)+p+u},T.prototype[d.CAPSULE|d.LINE]=T.prototype.lineCapsule=function(t,e,o,i,n,r,s,a,c){return!c&&0};var U=i.create(),D=i.create(),W=new f({width:1,height:1});T.prototype[d.CAPSULE|d.CAPSULE]=T.prototype.capsuleCapsule=function(t,e,o,n,r,s,a,c,h){for(var l=U,p=D,u=0,d=0;d<2;d++){i.set(l,(0===d?-1:1)*e.length/2,0),i.rotate(l,l,n),i.add(l,l,o);for(var f=0;f<2;f++){i.set(p,(0===f?-1:1)*s.length/2,0),i.rotate(p,p,c),i.add(p,p,a),this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var v=this.circleCircle(t,e,l,n,r,s,p,c,h,e.radius,s.radius);if(this.enableFrictionReduction&&(this.enableFriction=m),h&&v)return!0;u+=v}}this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var g=W;G(g,e);var y=this.convexCapsule(t,g,o,n,r,s,a,c,h);if(this.enableFrictionReduction&&(this.enableFriction=m),h&&y)return!0;if(u+=y,this.enableFrictionReduction){var m=this.enableFriction;this.enableFriction=!1}G(g,s);var b=this.convexCapsule(r,g,a,c,t,e,o,n,h);return this.enableFrictionReduction&&(this.enableFriction=m),!(!h||!b)||(u+=b,this.enableFrictionReduction&&u&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(u)),u)},T.prototype[d.LINE|d.LINE]=T.prototype.lineLine=function(t,e,o,i,n,r,s,a,c){return!c&&0},T.prototype[d.PLANE|d.LINE]=T.prototype.planeLine=function(t,e,o,a,c,h,l,p,u){var d=g,f=y,S=m,x=b,q=A,L=E,M=B,C=w,F=P,I=R,V=0;i.set(d,-h.length/2,0),i.set(f,h.length/2,0),i.rotate(S,d,p),i.rotate(x,f,p),r(S,S,l),r(x,x,l),i.copy(d,S),i.copy(f,x),n(q,f,d),i.normalize(L,q),i.rotate90cw(F,L),i.rotate(C,v,a),I[0]=d,I[1]=f;for(var T=0;T<I.length;T++){var N=I[T];n(M,N,o);var O=s(M,C);if(O<0){if(u)return!0;var G=this.createContactEquation(t,c,e,h);V++,i.copy(G.normalA,C),i.normalize(G.normalA,G.normalA),i.scale(M,C,O),n(G.contactPointA,N,M),n(G.contactPointA,G.contactPointA,t.position),n(G.contactPointB,N,l),r(G.contactPointB,G.contactPointB,l),n(G.contactPointB,G.contactPointB,c.position),this.contactEquations.push(G),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(G))}}return!u&&(this.enableFrictionReduction||V&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(V)),V)},T.prototype[d.PARTICLE|d.CAPSULE]=T.prototype.particleCapsule=function(t,e,o,i,n,r,s,a,c){return this.circleLine(t,e,o,i,n,r,s,a,c,r.radius,0)},T.prototype[d.CIRCLE|d.LINE]=T.prototype.circleLine=function(t,e,o,a,c,h,l,p,u,d,f){d=d||0,f=void 0!==f?f:e.radius;var v=g,C=y,F=m,I=b,V=A,T=E,N=B,O=w,G=P,k=S,_=x,U=q,D=L,W=M,z=R;i.set(O,-h.length/2,0),i.set(G,h.length/2,0),i.rotate(k,O,p),i.rotate(_,G,p),r(k,k,l),r(_,_,l),i.copy(O,k),i.copy(G,_),n(T,G,O),i.normalize(N,T),i.rotate90cw(V,N),n(U,o,O);var X=s(U,V);n(I,O,l),n(D,o,l);var Y=f+d;if(Math.abs(X)<Y){i.scale(v,V,X),n(F,o,v),i.scale(C,V,s(V,D)),i.normalize(C,C),i.scale(C,C,d),r(F,F,C);var j=s(N,F),H=s(N,O),K=s(N,G);if(j>H&&j<K){if(u)return!0;var Z=this.createContactEquation(t,c,e,h);return i.scale(Z.normalA,v,-1),i.normalize(Z.normalA,Z.normalA),i.scale(Z.contactPointA,Z.normalA,f),r(Z.contactPointA,Z.contactPointA,o),n(Z.contactPointA,Z.contactPointA,t.position),n(Z.contactPointB,F,l),r(Z.contactPointB,Z.contactPointB,l),n(Z.contactPointB,Z.contactPointB,c.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}z[0]=O,z[1]=G;for(var J=0;J<z.length;J++){var Q=z[J];if(n(U,Q,o),i.squaredLength(U)<Math.pow(Y,2)){if(u)return!0;Z=this.createContactEquation(t,c,e,h);return i.copy(Z.normalA,U),i.normalize(Z.normalA,Z.normalA),i.scale(Z.contactPointA,Z.normalA,f),r(Z.contactPointA,Z.contactPointA,o),n(Z.contactPointA,Z.contactPointA,t.position),n(Z.contactPointB,Q,l),i.scale(W,Z.normalA,-d),r(Z.contactPointB,Z.contactPointB,W),r(Z.contactPointB,Z.contactPointB,l),n(Z.contactPointB,Z.contactPointB,c.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}return 0},T.prototype[d.CIRCLE|d.CAPSULE]=T.prototype.circleCapsule=function(t,e,o,i,n,r,s,a,c){return this.circleLine(t,e,o,i,n,r,s,a,c,r.radius)},T.prototype[d.CIRCLE|d.CONVEX]=T.prototype[d.CIRCLE|d.BOX]=T.prototype.circleConvex=function(t,e,o,s,a,c,h,l,p,u){u="number"==typeof u?u:e.radius;for(var d=g,f=y,v=m,E=b,B=A,w=S,P=x,q=L,I=M,V=C,R=F,T=!1,N=Number.MAX_VALUE,O=c.vertices,G=0;G!==O.length+1;G++){var k=O[G%O.length],_=O[(G+1)%O.length];if(i.rotate(d,k,l),i.rotate(f,_,l),r(d,d,h),r(f,f,h),n(v,f,d),i.normalize(E,v),i.rotate90cw(B,E),i.scale(I,B,-e.radius),r(I,I,o),H(I,c,h,l)){i.sub(V,d,I);var U=Math.abs(i.dot(V,B));U<N&&(i.copy(R,I),N=U,i.scale(q,B,U),i.add(q,q,I),T=!0)}}if(T){if(p)return!0;var D=this.createContactEquation(t,a,e,c);return i.sub(D.normalA,R,o),i.normalize(D.normalA,D.normalA),i.scale(D.contactPointA,D.normalA,u),r(D.contactPointA,D.contactPointA,o),n(D.contactPointA,D.contactPointA,t.position),n(D.contactPointB,q,h),r(D.contactPointB,D.contactPointB,h),n(D.contactPointB,D.contactPointB,a.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}if(u>0)for(G=0;G<O.length;G++){var W=O[G];if(i.rotate(P,W,l),r(P,P,h),n(w,P,o),i.squaredLength(w)<Math.pow(u,2)){if(p)return!0;D=this.createContactEquation(t,a,e,c);return i.copy(D.normalA,w),i.normalize(D.normalA,D.normalA),i.scale(D.contactPointA,D.normalA,u),r(D.contactPointA,D.contactPointA,o),n(D.contactPointA,D.contactPointA,t.position),n(D.contactPointB,P,h),r(D.contactPointB,D.contactPointB,h),n(D.contactPointB,D.contactPointB,a.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}}return 0};var z=i.create(),X=i.create(),Y=i.create(),j=i.create();function H(t,e,o,s){for(var a=z,c=X,h=Y,l=j,p=t,u=e.vertices,d=null,f=0;f!==u.length+1;f++){var v=u[f%u.length],g=u[(f+1)%u.length];i.rotate(a,v,s),i.rotate(c,g,s),r(a,a,o),r(c,c,o),n(h,a,p),n(l,c,p);var y=i.crossLength(h,l);if(null===d&&(d=y),y*d<=0)return!1;d=y}return!0}T.prototype[d.PARTICLE|d.CONVEX]=T.prototype[d.PARTICLE|d.BOX]=T.prototype.particleConvex=function(t,e,o,a,c,h,l,p,u){var d=g,f=y,v=m,w=b,P=A,x=E,q=B,M=S,C=L,F=I,R=V,T=Number.MAX_VALUE,N=!1,O=h.vertices;if(!H(o,h,l,p))return 0;if(u)return!0;for(var G=0;G!==O.length+1;G++){var k=O[G%O.length],_=O[(G+1)%O.length];i.rotate(d,k,p),i.rotate(f,_,p),r(d,d,l),r(f,f,l),n(v,f,d),i.normalize(w,v),i.rotate90cw(P,w),n(M,o,d);s(M,P);n(x,d,l),n(q,o,l),i.sub(F,d,o);var U=Math.abs(i.dot(F,P));U<T&&(T=U,i.scale(C,P,U),i.add(C,C,o),i.copy(R,P),N=!0)}if(N){var D=this.createContactEquation(t,c,e,h);return i.scale(D.normalA,R,-1),i.normalize(D.normalA,D.normalA),i.set(D.contactPointA,0,0),r(D.contactPointA,D.contactPointA,o),n(D.contactPointA,D.contactPointA,t.position),n(D.contactPointB,C,l),r(D.contactPointB,D.contactPointB,l),n(D.contactPointB,D.contactPointB,c.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}return 0},T.prototype[d.CIRCLE]=T.prototype.circleCircle=function(t,e,o,s,a,c,h,l,p,u,d){var f=g;u=u||e.radius,d=d||c.radius;n(f,o,h);var v=u+d;if(i.squaredLength(f)>Math.pow(v,2))return 0;if(p)return!0;var y=this.createContactEquation(t,a,e,c);return n(y.normalA,h,o),i.normalize(y.normalA,y.normalA),i.scale(y.contactPointA,y.normalA,u),i.scale(y.contactPointB,y.normalA,-d),r(y.contactPointA,y.contactPointA,o),n(y.contactPointA,y.contactPointA,t.position),r(y.contactPointB,y.contactPointB,h),n(y.contactPointB,y.contactPointB,a.position),this.contactEquations.push(y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y)),1},T.prototype[d.PLANE|d.CONVEX]=T.prototype[d.PLANE|d.BOX]=T.prototype.planeConvex=function(t,e,o,a,c,h,l,p,u){var d=g,f=y,b=m,A=0;i.rotate(f,v,a);for(var E=0;E!==h.vertices.length;E++){var B=h.vertices[E];if(i.rotate(d,B,p),r(d,d,l),n(b,d,o),s(b,f)<=0){if(u)return!0;A++;var w=this.createContactEquation(t,c,e,h);n(b,d,o),i.copy(w.normalA,f);var P=s(b,w.normalA);i.scale(b,w.normalA,P),n(w.contactPointB,d,c.position),n(w.contactPointA,d,b),n(w.contactPointA,w.contactPointA,t.position),this.contactEquations.push(w),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(w))}}return this.enableFrictionReduction&&this.enableFriction&&A&&this.frictionEquations.push(this.createFrictionFromAverage(A)),A},T.prototype[d.PARTICLE|d.PLANE]=T.prototype.particlePlane=function(t,e,o,r,a,c,h,l,p){var u=g,d=y;l=l||0,n(u,o,h),i.rotate(d,v,l);var f=s(u,d);if(f>0)return 0;if(p)return!0;var m=this.createContactEquation(a,t,c,e);return i.copy(m.normalA,d),i.scale(u,m.normalA,f),n(m.contactPointA,o,u),n(m.contactPointA,m.contactPointA,a.position),n(m.contactPointB,o,t.position),this.contactEquations.push(m),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m)),1},T.prototype[d.CIRCLE|d.PARTICLE]=T.prototype.circleParticle=function(t,e,o,s,a,c,h,l,p){var u=g;if(n(u,h,o),i.squaredLength(u)>Math.pow(e.radius,2))return 0;if(p)return!0;var d=this.createContactEquation(t,a,e,c);return i.copy(d.normalA,u),i.normalize(d.normalA,d.normalA),i.scale(d.contactPointA,d.normalA,e.radius),r(d.contactPointA,d.contactPointA,o),n(d.contactPointA,d.contactPointA,t.position),n(d.contactPointB,h,a.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1};var K=new p({radius:1}),Z=i.create(),J=i.create();i.create();T.prototype[d.PLANE|d.CAPSULE]=T.prototype.planeCapsule=function(t,e,o,n,s,a,c,h,l){var p,u=Z,d=J,f=K;i.set(u,-a.length/2,0),i.rotate(u,u,h),r(u,u,c),i.set(d,a.length/2,0),i.rotate(d,d,h),r(d,d,c),f.radius=a.radius,this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var v=this.circlePlane(s,f,u,0,t,e,o,n,l),g=this.circlePlane(s,f,d,0,t,e,o,n,l);if(this.enableFrictionReduction&&(this.enableFriction=p),l)return v||g;var y=v+g;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},T.prototype[d.CIRCLE|d.PLANE]=T.prototype.circlePlane=function(t,e,o,a,c,h,l,p,u){var d=t,f=e,b=o,A=c,E=l,B=p;B=B||0;var w=g,P=y,S=m;n(w,b,E),i.rotate(P,v,B);var x=s(P,w);if(x>f.radius)return 0;if(u)return!0;var q=this.createContactEquation(A,d,h,e);return i.copy(q.normalA,P),i.scale(q.contactPointB,q.normalA,-f.radius),r(q.contactPointB,q.contactPointB,b),n(q.contactPointB,q.contactPointB,d.position),i.scale(S,q.normalA,x),n(q.contactPointA,w,S),r(q.contactPointA,q.contactPointA,E),n(q.contactPointA,q.contactPointA,A.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1},T.prototype[d.CONVEX]=T.prototype[d.CONVEX|d.BOX]=T.prototype[d.BOX]=T.prototype.convexConvex=function(t,e,o,a,c,h,l,p,u,d){var f=g,v=y,E=m,S=b,x=A,q=B,L=w,M=P,C=0;d="number"==typeof d?d:0;if(!T.findSeparatingAxis(e,o,a,h,l,p,f))return 0;n(L,l,o),s(f,L)>0&&i.scale(f,f,-1);var F=T.getClosestEdge(e,a,f,!0),I=T.getClosestEdge(h,p,f);if(-1===F||-1===I)return 0;for(var V=0;V<2;V++){var R,N=F,O=I,G=e,k=h,_=o,U=l,D=a,W=p,z=t,X=c;if(0===V)R=N,N=O,O=R,R=G,G=k,k=R,R=_,_=U,U=R,R=D,D=W,W=R,R=z,z=X,X=R;for(var Y=O;Y<O+2;Y++){var j=k.vertices[(Y+k.vertices.length)%k.vertices.length];i.rotate(v,j,W),r(v,v,U);for(var H=0,K=N-1;K<N+2;K++){var Z=G.vertices[(K+G.vertices.length)%G.vertices.length],J=G.vertices[(K+1+G.vertices.length)%G.vertices.length];i.rotate(E,Z,D),i.rotate(S,J,D),r(E,E,_),r(S,S,_),n(x,S,E),i.rotate90cw(M,x),i.normalize(M,M),n(L,v,E);var Q=s(M,L);(K===N&&Q<=d||K!==N&&Q<=0)&&H++}if(H>=3){if(u)return!0;var $=this.createContactEquation(z,X,G,k);C++;Z=G.vertices[N%G.vertices.length],J=G.vertices[(N+1)%G.vertices.length];i.rotate(E,Z,D),i.rotate(S,J,D),r(E,E,_),r(S,S,_),n(x,S,E),i.rotate90cw($.normalA,x),i.normalize($.normalA,$.normalA),n(L,v,E);Q=s($.normalA,L);i.scale(q,$.normalA,Q),n($.contactPointA,v,_),n($.contactPointA,$.contactPointA,q),r($.contactPointA,$.contactPointA,_),n($.contactPointA,$.contactPointA,z.position),n($.contactPointB,v,U),r($.contactPointB,$.contactPointB,U),n($.contactPointB,$.contactPointB,X.position),this.contactEquations.push($),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact($))}}}return this.enableFrictionReduction&&this.enableFriction&&C&&this.frictionEquations.push(this.createFrictionFromAverage(C)),C};var Q=i.fromValues(0,0);T.projectConvexOntoAxis=function(t,e,o,n,r){var a,c,h=null,l=null,p=Q;i.rotate(p,n,-o);for(var u=0;u<t.vertices.length;u++)a=t.vertices[u],c=s(a,p),(null===h||c>h)&&(h=c),(null===l||c<l)&&(l=c);if(l>h){var d=l;l=h,h=d}var f=s(e,n);i.set(r,l+f,h+f)};var $=i.fromValues(0,0),tt=i.fromValues(0,0),et=i.fromValues(0,0),ot=i.fromValues(0,0),it=i.fromValues(0,0),nt=i.fromValues(0,0);T.findSeparatingAxis=function(t,e,o,r,s,a,c){var h=null,l=!1,p=!1,u=$,d=tt,v=et,g=ot,y=it,m=nt;if(t instanceof f&&r instanceof f)for(var b=0;2!==b;b++){var A=t,E=o;1===b&&(A=r,E=a);for(var B=0;2!==B;B++){0===B?i.set(g,0,1):1===B&&i.set(g,1,0),0!==E&&i.rotate(g,g,E),T.projectConvexOntoAxis(t,e,o,g,y),T.projectConvexOntoAxis(r,s,a,g,m);var w=y,P=m;y[0]>m[0]&&(P=y,w=m,!0),l=(S=P[0]-w[1])<=0,(null===h||S>h)&&(i.copy(c,g),h=S,p=l)}}else for(b=0;2!==b;b++){A=t,E=o;1===b&&(A=r,E=a);for(B=0;B!==A.vertices.length;B++){i.rotate(d,A.vertices[B],E),i.rotate(v,A.vertices[(B+1)%A.vertices.length],E),n(u,v,d),i.rotate90cw(g,u),i.normalize(g,g),T.projectConvexOntoAxis(t,e,o,g,y),T.projectConvexOntoAxis(r,s,a,g,m);var S;w=y,P=m;y[0]>m[0]&&(P=y,w=m,!0),l=(S=P[0]-w[1])<=0,(null===h||S>h)&&(i.copy(c,g),h=S,p=l)}}return p};var rt=i.fromValues(0,0),st=i.fromValues(0,0),at=i.fromValues(0,0);T.getClosestEdge=function(t,e,o,r){var a=rt,c=st,h=at;i.rotate(a,o,-e),r&&i.scale(a,a,-1);for(var l=-1,p=t.vertices.length,u=-1,d=0;d!==p;d++){n(c,t.vertices[(d+1)%p],t.vertices[d%p]),i.rotate90cw(h,c),i.normalize(h,h);var f=s(h,a);(-1===l||f>u)&&(l=d%p,u=f)}return l};var ct=i.create(),ht=i.create(),lt=i.create(),pt=i.create(),ut=i.create(),dt=i.create(),ft=i.create();T.prototype[d.CIRCLE|d.HEIGHTFIELD]=T.prototype.circleHeightfield=function(t,e,o,s,a,c,h,l,p,u){var d=c.heights,f=(u=u||e.radius,c.elementWidth),v=ht,g=ct,y=ut,m=ft,b=dt,A=lt,E=pt,B=Math.floor((o[0]-u-h[0])/f),w=Math.ceil((o[0]+u-h[0])/f);B<0&&(B=0),w>=d.length&&(w=d.length-1);for(var P=d[B],S=d[w],x=B;x<w;x++)d[x]<S&&(S=d[x]),d[x]>P&&(P=d[x]);if(o[1]-u>P)return!p&&0;var q=!1;for(x=B;x<w;x++){i.set(A,x*f,d[x]),i.set(E,(x+1)*f,d[x+1]),i.add(A,A,h),i.add(E,E,h),i.sub(b,E,A),i.rotate(b,b,Math.PI/2),i.normalize(b,b),i.scale(g,b,-u),i.add(g,g,o),i.sub(v,g,A);var L=i.dot(v,b);if(g[0]>=A[0]&&g[0]<E[0]&&L<=0){if(p)return!0;q=!0,i.scale(v,b,-L),i.add(y,g,v),i.copy(m,b);var M=this.createContactEquation(a,t,c,e);i.copy(M.normalA,m),i.scale(M.contactPointB,M.normalA,-u),r(M.contactPointB,M.contactPointB,o),n(M.contactPointB,M.contactPointB,t.position),i.copy(M.contactPointA,y),i.sub(M.contactPointA,M.contactPointA,a.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}if(q=!1,u>0)for(x=B;x<=w;x++)if(i.set(A,x*f,d[x]),i.add(A,A,h),i.sub(v,o,A),i.squaredLength(v)<Math.pow(u,2)){if(p)return!0;q=!0;M=this.createContactEquation(a,t,c,e);i.copy(M.normalA,v),i.normalize(M.normalA,M.normalA),i.scale(M.contactPointB,M.normalA,-u),r(M.contactPointB,M.contactPointB,o),n(M.contactPointB,M.contactPointB,t.position),n(M.contactPointA,A,h),r(M.contactPointA,M.contactPointA,h),n(M.contactPointA,M.contactPointA,a.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}return q?1:0};var vt=i.create(),gt=i.create(),yt=i.create(),mt=new u({vertices:[i.create(),i.create(),i.create(),i.create()]});T.prototype[d.BOX|d.HEIGHTFIELD]=T.prototype[d.CONVEX|d.HEIGHTFIELD]=T.prototype.convexHeightfield=function(t,e,o,n,r,s,a,c,h){var l=s.heights,p=s.elementWidth,u=vt,d=gt,f=yt,v=mt,g=Math.floor((t.aabb.lowerBound[0]-a[0])/p),y=Math.ceil((t.aabb.upperBound[0]-a[0])/p);g<0&&(g=0),y>=l.length&&(y=l.length-1);for(var m=l[g],b=l[y],A=g;A<y;A++)l[A]<b&&(b=l[A]),l[A]>m&&(m=l[A]);if(t.aabb.lowerBound[1]>m)return!h&&0;var E=0;for(A=g;A<y;A++){i.set(u,A*p,l[A]),i.set(d,(A+1)*p,l[A+1]),i.add(u,u,a),i.add(d,d,a);i.set(f,.5*(d[0]+u[0]),.5*(d[1]+u[1]-100)),i.sub(v.vertices[0],d,f),i.sub(v.vertices[1],u,f),i.copy(v.vertices[2],v.vertices[1]),i.copy(v.vertices[3],v.vertices[0]),v.vertices[2][1]-=100,v.vertices[3][1]-=100,E+=this.convexConvex(t,e,o,n,r,v,f,0,h)}return E}},function(t,e,o){var i=o(2);function n(){this.data={},this.keys=[]}t.exports=n,n.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},n.prototype.getByKey=function(t){return t|=0,this.data[t]},n.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},n.prototype.set=function(t,e,o){if(!o)throw new Error("No data!");var i=this.getKey(t,e);return this.data[i]||this.keys.push(i),this.data[i]=o,i},n.prototype.reset=function(){for(var t=this.data,e=this.keys,o=e.length;o--;)delete t[e[o]];e.length=0},n.prototype.copy=function(t){this.reset(),i.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var o=t.keys[e];this.data[o]=t.data[o]}}},function(t,e,o){var i=o(0),n=o(4),r=o(10);function s(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,o=this.height=t.height||1,s=[i.fromValues(-e/2,-o/2),i.fromValues(e/2,-o/2),i.fromValues(e/2,o/2),i.fromValues(-e/2,o/2)],a=[i.fromValues(1,0),i.fromValues(0,1)];t.vertices=s,t.axes=a,t.type=n.BOX,r.call(this,t)}t.exports=s,s.prototype=new r,s.prototype.constructor=s,s.prototype.computeMomentOfInertia=function(t){var e=this.width,o=this.height;return t*(o*o+e*e)/12},s.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};i.create(),i.create(),i.create(),i.create();s.prototype.computeAABB=function(t,e,o){t.setFromPoints(this.vertices,e,o,0)},s.prototype.updateArea=function(){this.area=this.width*this.height}},function(t,e,o){var i=o(7),n=o(3),r=o(41),s=o(42),a=o(0);t.exports=d;var c=a.create(),h=a.create(),l=a.fromValues(1,0),p=a.fromValues(0,1),u=a.create();function d(t,e,o){o=o||{},i.call(this,t,e,i.REVOLUTE,o);var d=this.maxForce=void 0!==o.maxForce?o.maxForce:Number.MAX_VALUE;this.pivotA=a.create(),this.pivotB=a.create(),o.worldPivot?(a.sub(this.pivotA,o.worldPivot,t.position),a.sub(this.pivotB,o.worldPivot,e.position),a.rotate(this.pivotA,this.pivotA,-t.angle),a.rotate(this.pivotB,this.pivotB,-e.angle)):(a.copy(this.pivotA,o.localPivotA),a.copy(this.pivotB,o.localPivotB));var f=this.equations=[new n(t,e,-d,d),new n(t,e,-d,d)],v=f[0],g=f[1],y=this;v.computeGq=function(){return a.rotate(c,y.pivotA,t.angle),a.rotate(h,y.pivotB,e.angle),a.add(u,e.position,h),a.sub(u,u,t.position),a.sub(u,u,c),a.dot(u,l)},g.computeGq=function(){return a.rotate(c,y.pivotA,t.angle),a.rotate(h,y.pivotB,e.angle),a.add(u,e.position,h),a.sub(u,u,t.position),a.sub(u,u,c),a.dot(u,p)},g.minForce=v.minForce=-d,g.maxForce=v.maxForce=d,this.motorEquation=new r(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new s(t,e),this.lowerLimitEquation=new s(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}d.prototype=new i,d.prototype.constructor=d,d.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},d.prototype.update=function(){var t,e=this.bodyA,o=this.bodyB,i=this.pivotA,n=this.pivotB,r=this.equations,s=(r[0],r[1],r[0]),u=r[1],d=this.upperLimit,f=this.lowerLimit,v=this.upperLimitEquation,g=this.lowerLimitEquation,y=this.angle=o.angle-e.angle;this.upperLimitEnabled&&y>d?(v.angle=d,-1===r.indexOf(v)&&r.push(v)):-1!==(t=r.indexOf(v))&&r.splice(t,1);this.lowerLimitEnabled&&y<f?(g.angle=f,-1===r.indexOf(g)&&r.push(g)):-1!==(t=r.indexOf(g))&&r.splice(t,1);a.rotate(c,i,e.angle),a.rotate(h,n,o.angle),s.G[0]=-1,s.G[1]=0,s.G[2]=-a.crossLength(c,l),s.G[3]=1,s.G[4]=0,s.G[5]=a.crossLength(h,l),u.G[0]=0,u.G[1]=-1,u.G[2]=-a.crossLength(c,p),u.G[3]=0,u.G[4]=1,u.G[5]=a.crossLength(h,p)},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},d.prototype.motorIsEnabled=function(){return!!this.motorEnabled},d.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},d.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},function(t,e,o){var i=o(3);o(0);function n(t,e){i.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.computeB=function(t,e,o){var i=this.G;i[2]=-1,i[5]=this.ratio;var n=this.computeGiMf();return-this.computeGW()*e-o*n}},function(t,e,o){var i=o(3),n=o(0);function r(t,e,o){o=o||{},i.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0;var n=this.G;n[2]=1,n[5]=-1}t.exports=r,r.prototype=new i,r.prototype.constructor=r;var s=n.create(),a=n.create(),c=n.fromValues(1,0),h=n.fromValues(0,1);r.prototype.computeGq=function(){return n.rotate(s,c,this.bodyA.angle+this.angle),n.rotate(a,h,this.bodyB.angle),n.dot(s,a)}},function(t,e,o){var i=o(7),n=o(17),r=o(3),s=o(0),a=o(42);function c(t,e,o){o=o||{},i.call(this,t,e,i.PRISMATIC,o);var c=s.fromValues(0,0),h=s.fromValues(1,0),l=s.fromValues(0,0);o.localAnchorA&&s.copy(c,o.localAnchorA),o.localAxisA&&s.copy(h,o.localAxisA),o.localAnchorB&&s.copy(l,o.localAnchorB),this.localAnchorA=c,this.localAnchorB=l,this.localAxisA=h;var p=this.maxForce=void 0!==o.maxForce?o.maxForce:Number.MAX_VALUE,u=new r(t,e,-p,p),d=new s.create,f=new s.create,v=new s.create,g=new s.create;if(u.computeGq=function(){return s.dot(v,g)},u.updateJacobian=function(){var o=this.G,i=t.position,n=e.position;s.rotate(d,c,t.angle),s.rotate(f,l,e.angle),s.add(v,n,f),s.sub(v,v,i),s.sub(v,v,d),s.rotate(g,h,t.angle+Math.PI/2),o[0]=-g[0],o[1]=-g[1],o[2]=-s.crossLength(d,g)+s.crossLength(g,v),o[3]=g[0],o[4]=g[1],o[5]=s.crossLength(f,g)},this.equations.push(u),!o.disableRotationalLock){var y=new a(t,e,-p,p);this.equations.push(y)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==o.lowerLimit,this.upperLimitEnabled=void 0!==o.upperLimit,this.lowerLimit=void 0!==o.lowerLimit?o.lowerLimit:0,this.upperLimit=void 0!==o.upperLimit?o.upperLimit:1,this.upperLimitEquation=new n(t,e),this.lowerLimitEquation=new n(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=p,this.motorEquation=new r(t,e),this.motorEnabled=!1,this.motorSpeed=0;var m=this,b=this.motorEquation;b.computeGW;b.computeGq=function(){return 0},b.computeGW=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=e.velocity,n=o.velocity,r=e.angularVelocity,s=o.angularVelocity;return this.gmult(t,i,r,n,s)+m.motorSpeed}}t.exports=c,c.prototype=new i,c.prototype.constructor=c;var h=s.create(),l=s.create(),p=s.create(),u=s.create(),d=s.create(),f=s.create();c.prototype.update=function(){var t=this.equations,e=t[0],o=this.upperLimit,i=this.lowerLimit,n=this.upperLimitEquation,r=this.lowerLimitEquation,a=this.bodyA,c=this.bodyB,v=this.localAxisA,g=this.localAnchorA,y=this.localAnchorB;e.updateJacobian(),s.rotate(h,v,a.angle),s.rotate(u,g,a.angle),s.add(l,u,a.position),s.rotate(d,y,c.angle),s.add(p,d,c.position);var m,b=this.position=s.dot(p,h)-s.dot(l,h);if(this.motorEnabled){var A=this.motorEquation.G;A[0]=h[0],A[1]=h[1],A[2]=s.crossLength(h,d),A[3]=-h[0],A[4]=-h[1],A[5]=-s.crossLength(h,u)}this.upperLimitEnabled&&b>o?(s.scale(n.normalA,h,-1),s.sub(n.contactPointA,l,a.position),s.sub(n.contactPointB,p,c.position),s.scale(f,h,o),s.add(n.contactPointA,n.contactPointA,f),-1===t.indexOf(n)&&t.push(n)):-1!==(m=t.indexOf(n))&&t.splice(m,1);this.lowerLimitEnabled&&b<i?(s.scale(r.normalA,h,1),s.sub(r.contactPointA,l,a.position),s.sub(r.contactPointB,p,c.position),s.scale(f,h,i),s.sub(r.contactPointB,r.contactPointB,f),-1===t.indexOf(r)&&t.push(r)):-1!==(m=t.indexOf(r))&&t.splice(m,1)},c.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},c.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},c.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},function(t,e,o){var i=o(2),n=o(15);function r(){n.call(this,n.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var o=t.axisList.indexOf(e.body);-1!==o&&t.axisList.splice(o,1)}}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.setWorld=function(t){this.axisList.length=0,i.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},r.sortAxisList=function(t,e){e|=0;for(var o=1,i=t.length;o<i;o++){for(var n=t[o],r=o-1;r>=0&&!(t[r].aabb.lowerBound[e]<=n.aabb.lowerBound[e]);r--)t[r+1]=t[r];t[r+1]=n}return t},r.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;r.sortAxisList(t,e)},r.prototype.getCollisionPairs=function(t){var e=this.axisList,o=this.result,i=this.axisIndex;o.length=0;for(var r=e.length;r--;){var s=e[r];s.aabbNeedsUpdate&&s.updateAABB()}this.sortList();for(var a=0,c=0|e.length;a!==c;a++)for(var h=e[a],l=a+1;l<c;l++){var p=e[l];if(!(p.aabb.lowerBound[i]<=h.aabb.upperBound[i]))break;n.canCollide(h,p)&&this.boundingVolumeCheck(h,p)&&o.push(h,p)}return o},r.prototype.aabbQuery=function(t,e,o){o=o||[],this.sortList();var i=this.axisIndex,n="x";1===i&&(n="y"),2===i&&(n="z");for(var r=this.axisList,s=(e.lowerBound[n],e.upperBound[n],0);s<r.length;s++){var a=r[s];a.aabbNeedsUpdate&&a.updateAABB(),a.aabb.overlaps(e)&&o.push(a)}return o}},function(t,e,o){var i=o(0),n=o(23);o(2);function r(t,e,o){o=o||{},n.call(this,t,e,o),this.localAnchorA=i.fromValues(0,0),this.localAnchorB=i.fromValues(0,0),o.localAnchorA&&i.copy(this.localAnchorA,o.localAnchorA),o.localAnchorB&&i.copy(this.localAnchorB,o.localAnchorB),o.worldAnchorA&&this.setWorldAnchorA(o.worldAnchorA),o.worldAnchorB&&this.setWorldAnchorB(o.worldAnchorB);var r=i.create(),s=i.create();this.getWorldAnchorA(r),this.getWorldAnchorB(s);var a=i.distance(r,s);this.restLength="number"==typeof o.restLength?o.restLength:a}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},r.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},r.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},r.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var s=i.create(),a=i.create(),c=i.create(),h=i.create(),l=i.create(),p=i.create(),u=i.create(),d=i.create(),f=i.create();r.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,o=this.restLength,n=this.bodyA,r=this.bodyB,v=s,g=a,y=c,m=h,b=f,A=l,E=p,B=u,w=d;this.getWorldAnchorA(A),this.getWorldAnchorB(E),i.sub(B,A,n.position),i.sub(w,E,r.position),i.sub(v,E,A);var P=i.len(v);i.normalize(g,v),i.sub(y,r.velocity,n.velocity),i.crossZV(b,r.angularVelocity,w),i.add(y,y,b),i.crossZV(b,n.angularVelocity,B),i.sub(y,y,b),i.scale(m,g,-t*(P-o)-e*i.dot(y,g)),i.sub(n.force,n.force,m),i.add(r.force,r.force,m);var S=i.crossLength(B,m),x=i.crossLength(w,m);n.angularForce-=S,r.angularForce+=x}},function(t,e,o){o(0);var i=o(23);function n(t,e,o){o=o||{},i.call(this,t,e,o),this.restAngle="number"==typeof o.restAngle?o.restAngle:e.angle-t.angle}t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,o=this.restAngle,i=this.bodyA,n=this.bodyB,r=-t*(n.angle-i.angle-o)-e*(n.angularVelocity-i.angularVelocity)*0;i.angularForce-=r,n.angularForce+=r}},function(t){t.exports={_from:"p2",_id:"p2@0.7.1",_inBundle:!1,_integrity:"sha1-JfJHTZvDptMUCh2iamfJ4RislUM=",_location:"/p2",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"p2",name:"p2",escapedName:"p2",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/p2/-/p2-0.7.1.tgz",_shasum:"25f2474d9bc3a6d3140a1da26a67c9e118ac9543",_spec:"p2",_where:"/Users/robertbrownstein/Documents/Experiments/open-sourceror",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},bundleDependencies:!1,dependencies:{"poly-decomp":"0.1.1"},deprecated:!1,description:"A JavaScript 2D physics engine.",devDependencies:{grunt:"^0.4.5","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0"},engines:{node:"*"},homepage:"https://github.com/schteppe/p2.js#readme",keywords:["p2.js","p2","physics","engine","2d"],licenses:[{type:"MIT"}],main:"./src/p2.js",name:"p2",repository:{type:"git",url:"git+https://github.com/schteppe/p2.js.git"},version:"0.7.1"}},function(t,e){function o(t,e,o,i){this.shapeA=e,this.shapeB=i,this.bodyA=t,this.bodyB=o}t.exports=o,o.prototype.set=function(t,e,i,n){o.call(this,t,e,i,n)}},function(t,e,o){var i=o(6);function n(){this.equations=[],this.bodies=[]}t.exports=n,n.prototype.reset=function(){this.equations.length=this.bodies.length=0};var r=[];n.prototype.getBodies=function(t){var e=t||[],o=this.equations;r.length=0;for(var i=0;i!==o.length;i++){var n=o[i];-1===r.indexOf(n.bodyA.id)&&(e.push(n.bodyA),r.push(n.bodyA.id)),-1===r.indexOf(n.bodyB.id)&&(e.push(n.bodyB),r.push(n.bodyB.id))}return e},n.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===i.DYNAMIC&&!e.wantsToSleep)return!1}return!0},n.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){this.bodies[t].sleep()}return!0}},function(t,e){function o(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=o,o.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},function(t,e,o){var i=o(52),n=o(27),r=o(26);function s(){this.vertices=[]}t.exports=s,s.prototype.at=function(t){var e=this.vertices,o=e.length;return e[t<0?t%o+o:t%o]},s.prototype.first=function(){return this.vertices[0]},s.prototype.last=function(){return this.vertices[this.vertices.length-1]},s.prototype.clear=function(){this.vertices.length=0},s.prototype.append=function(t,e,o){if(void 0===e)throw new Error("From is not given!");if(void 0===o)throw new Error("To is not given!");if(o-1<e)throw new Error("lol1");if(o>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var i=e;i<o;i++)this.vertices.push(t.vertices[i])},s.prototype.makeCCW=function(){for(var t=0,e=this.vertices,o=1;o<this.vertices.length;++o)(e[o][1]<e[t][1]||e[o][1]==e[t][1]&&e[o][0]>e[t][0])&&(t=o);n.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},s.prototype.reverse=function(){for(var t=[],e=0,o=this.vertices.length;e!==o;e++)t.push(this.vertices.pop());this.vertices=t},s.prototype.isReflex=function(t){return n.right(this.at(t-1),this.at(t),this.at(t+1))};var a=[],c=[];function h(t,e,o,i,n){n=n||0;var s=e[1]-t[1],a=t[0]-e[0],c=s*t[0]+a*t[1],h=i[1]-o[1],l=o[0]-i[0],p=h*o[0]+l*o[1],u=s*l-h*a;return r.eq(u,0,n)?[0,0]:[(l*c-a*p)/u,(s*p-h*c)/u]}s.prototype.canSee=function(t,e){var o,r,s=a,h=c;if(n.leftOn(this.at(t+1),this.at(t),this.at(e))&&n.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;r=n.sqdist(this.at(t),this.at(e));for(var l=0;l!==this.vertices.length;++l)if((l+1)%this.vertices.length!==t&&l!==t&&n.leftOn(this.at(t),this.at(e),this.at(l+1))&&n.rightOn(this.at(t),this.at(e),this.at(l))&&(s[0]=this.at(t),s[1]=this.at(e),h[0]=this.at(l),h[1]=this.at(l+1),o=i.lineInt(s,h),n.sqdist(this.at(t),o)<r))return!1;return!0},s.prototype.copy=function(t,e,o){var i=o||new s;if(i.clear(),t<e)for(var n=t;n<=e;n++)i.vertices.push(this.vertices[n]);else{for(n=0;n<=e;n++)i.vertices.push(this.vertices[n]);for(n=t;n<this.vertices.length;n++)i.vertices.push(this.vertices[n])}return i},s.prototype.getCutEdges=function(){for(var t=[],e=[],o=[],i=new s,n=Number.MAX_VALUE,r=0;r<this.vertices.length;++r)if(this.isReflex(r))for(var a=0;a<this.vertices.length;++a)if(this.canSee(r,a)){e=this.copy(r,a,i).getCutEdges(),o=this.copy(a,r,i).getCutEdges();for(var c=0;c<o.length;c++)e.push(o[c]);e.length<n&&(t=e,n=e.length,t.push([this.at(r),this.at(a)]))}return t},s.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},s.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],o=0;o<t.length;o++)for(var i=t[o],n=0;n<e.length;n++){var r=e[n].slice(i);if(r){e.splice(n,1),e.push(r[0],r[1]);break}}return e}i=t,o=this.vertices.indexOf(i[0]),n=this.vertices.indexOf(i[1]);return-1!=o&&-1!=n&&[this.copy(o,n),this.copy(n,o)]},s.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var o=0;o<e-1;o++)if(i.segmentsIntersect(t[e],t[e+1],t[o],t[o+1]))return!1;for(e=1;e<t.length-2;e++)if(i.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},s.prototype.quickDecomp=function(t,e,o,i,r,a){r=r||100,a=a||0,i=i||25,t=void 0!==t?t:[],e=e||[],o=o||[];var c=[0,0],l=[0,0],p=[0,0],u=0,d=0,f=0,v=0,g=0,y=0,m=0,b=new s,A=new s,E=this.vertices;if(E.length<3)return t;if(++a>r)return console.warn("quickDecomp: max level ("+r+") reached."),t;for(var B=0;B<this.vertices.length;++B)if(this.isReflex(B)){e.push(this.vertices[B]),u=d=Number.MAX_VALUE;for(var w=0;w<this.vertices.length;++w)n.left(this.at(B-1),this.at(B),this.at(w))&&n.rightOn(this.at(B-1),this.at(B),this.at(w-1))&&(p=h(this.at(B-1),this.at(B),this.at(w),this.at(w-1)),n.right(this.at(B+1),this.at(B),p)&&(f=n.sqdist(this.vertices[B],p))<d&&(d=f,l=p,y=w)),n.left(this.at(B+1),this.at(B),this.at(w+1))&&n.rightOn(this.at(B+1),this.at(B),this.at(w))&&(p=h(this.at(B+1),this.at(B),this.at(w),this.at(w+1)),n.left(this.at(B-1),this.at(B),p)&&(f=n.sqdist(this.vertices[B],p))<u&&(u=f,c=p,g=w));if(y==(g+1)%this.vertices.length)p[0]=(l[0]+c[0])/2,p[1]=(l[1]+c[1])/2,o.push(p),B<g?(b.append(this,B,g+1),b.vertices.push(p),A.vertices.push(p),0!=y&&A.append(this,y,this.vertices.length),A.append(this,0,B+1)):(0!=B&&b.append(this,B,this.vertices.length),b.append(this,0,g+1),b.vertices.push(p),A.vertices.push(p),A.append(this,y,B+1));else{if(y>g&&(g+=this.vertices.length),v=Number.MAX_VALUE,g<y)return t;for(w=y;w<=g;++w)n.leftOn(this.at(B-1),this.at(B),this.at(w))&&n.rightOn(this.at(B+1),this.at(B),this.at(w))&&(f=n.sqdist(this.at(B),this.at(w)))<v&&(v=f,m=w%this.vertices.length);B<m?(b.append(this,B,m+1),0!=m&&A.append(this,m,E.length),A.append(this,0,B+1)):(0!=B&&b.append(this,B,E.length),b.append(this,0,m+1),A.append(this,m,B+1))}return b.vertices.length<A.vertices.length?(b.quickDecomp(t,e,o,i,r,a),A.quickDecomp(t,e,o,i,r,a)):(A.quickDecomp(t,e,o,i,r,a),b.quickDecomp(t,e,o,i,r,a)),t}return t.push(this),t},s.prototype.removeCollinearPoints=function(t){for(var e=0,o=this.vertices.length-1;this.vertices.length>3&&o>=0;--o)n.collinear(this.at(o-1),this.at(o),this.at(o+1),t)&&(this.vertices.splice(o%this.vertices.length,1),o--,e++);return e}},function(t,e,o){var i=o(26);function n(){}t.exports=n,n.lineInt=function(t,e,o){o=o||0;var n,r,s,a,c,h,l,p=[0,0];return n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],s=n*t[0][0]+r*t[0][1],a=e[1][1]-e[0][1],c=e[0][0]-e[1][0],h=a*e[0][0]+c*e[0][1],l=n*c-a*r,i.eq(l,0,o)||(p[0]=(c*s-r*h)/l,p[1]=(n*h-a*s)/l),p},n.segmentsIntersect=function(t,e,o,i){var n=e[0]-t[0],r=e[1]-t[1],s=i[0]-o[0],a=i[1]-o[1];if(s*r-a*n==0)return!1;var c=(n*(o[1]-t[1])+r*(t[0]-o[0]))/(s*r-a*n),h=(s*(t[1]-o[1])+a*(o[0]-t[0]))/(a*n-s*r);return c>=0&&c<=1&&h>=0&&h<=1}},function(t,e){var o={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,o=0,i=0;i<e;i+=2)o+=(t[i+2]-t[i])*(t[i+1]+t[i+3]);return.5*-(o+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(e<3)return[];for(var i=[],n=[],r=0;r<e;r++)n.push(r);r=0;for(var s=e;s>3;){var a=n[(r+0)%s],c=n[(r+1)%s],h=n[(r+2)%s],l=t[2*a],p=t[2*a+1],u=t[2*c],d=t[2*c+1],f=t[2*h],v=t[2*h+1],g=!1;if(o._convex(l,p,u,d,f,v)){g=!0;for(var y=0;y<s;y++){var m=n[y];if(m!=a&&m!=c&&m!=h&&o._PointInTriangle(t[2*m],t[2*m+1],l,p,u,d,f,v)){g=!1;break}}}if(g)i.push(a,c,h),n.splice((r+1)%s,1),s--,r=0;else if(r++>3*s)break}return i.push(n[0],n[1],n[2]),i},_PointInTriangle:function(t,e,o,i,n,r,s,a){var c=s-o,h=a-i,l=n-o,p=r-i,u=t-o,d=e-i,f=c*c+h*h,v=c*l+h*p,g=c*u+h*d,y=l*l+p*p,m=l*u+p*d,b=1/(f*y-v*v),A=(y*g-v*m)*b,E=(f*m-v*g)*b;return A>=0&&E>=0&&A+E<1},_convex:function(t,e,o,i,n,r){return(e-i)*(n-o)+(o-t)*(r-i)>=0}};t.exports=o},function(t,e,o){var i=o(4),n=o(0);o(2);function r(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=i.HEIGHTFIELD,i.call(this,t)}t.exports=r,r.prototype=new i,r.prototype.constructor=r,r.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],o=t[0],i=0;i!==t.length;i++){var n=t[i];n>e&&(e=n),n<o&&(o=n)}this.maxValue=e,this.minValue=o},r.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},r.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},r.prototype.updateArea=function(){for(var t=this.heights,e=0,o=0;o<t.length-1;o++)e+=(t[o]+t[o+1])/2*this.elementWidth;this.area=e};var s=[n.create(),n.create(),n.create(),n.create()];r.prototype.computeAABB=function(t,e,o){n.set(s[0],0,this.maxValue),n.set(s[1],this.elementWidth*this.heights.length,this.maxValue),n.set(s[2],this.elementWidth*this.heights.length,this.minValue),n.set(s[3],0,this.minValue),t.setFromPoints(s,e,o)},r.prototype.getLineSegment=function(t,e,o){var i=this.heights,r=this.elementWidth;n.set(t,o*r,i[o]),n.set(e,(o+1)*r,i[o+1])},r.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},r.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return e=Math.min(this.heights.length,Math.max(e,0))};n.create();var a=n.create(),c=n.create(),h=n.create(),l=n.create(),p=n.create();n.fromValues(0,1);r.prototype.raycast=function(t,e,o,i){var r=e.from,s=e.to,u=(e.direction,a),d=c,f=h,v=l,g=p;n.toLocalFrame(v,r,o,i),n.toLocalFrame(g,s,o,i);var y=this.getClampedSegmentIndex(v),m=this.getClampedSegmentIndex(g);if(y>m){var b=y;y=m,m=b}for(var A=0;A<this.heights.length-1;A++){this.getLineSegment(d,f,A);var E=n.getLineSegmentsIntersectionFraction(v,g,d,f);if(E>=0&&(n.sub(u,f,d),n.rotate(u,u,i+Math.PI/2),n.normalize(u,u),e.reportIntersection(t,E,u,-1),t.shouldStop(e)))return}}},function(t,e,o){o(16),o(21),o(4),o(22);var i=o(15);o(0);function n(){i.call(this,i.NAIVE)}t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.getCollisionPairs=function(t){var e=t.bodies,o=this.result;o.length=0;for(var n=0,r=e.length;n!==r;n++)for(var s=e[n],a=0;a<n;a++){var c=e[a];i.canCollide(s,c)&&this.boundingVolumeCheck(s,c)&&o.push(s,c)}return o},n.prototype.aabbQuery=function(t,e,o){o=o||[];for(var i=t.bodies,n=0;n<i.length;n++){var r=i[n];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&o.push(r)}return o}},function(t,e,o){var i=o(0),n=(o(2),o(7)),r=o(11),s=o(6);function a(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new s({mass:0}),this.world=null;var o=this;this.preStepCallback=function(){o.update()}}function c(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new r(t.chassisBody,t.groundBody),this.sideEquation=new r(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=i.fromValues(0,1),e.localForwardVector&&i.copy(this.localForwardVector,e.localForwardVector),this.localPosition=i.fromValues(0,0),e.localPosition&&i.copy(this.localPosition,e.localPosition),n.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}t.exports=a,a.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var o=this.wheels[e];t.addConstraint(o)}},a.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var o=this.wheels[e];t.removeConstraint(o)}this.world=null},a.prototype.addWheel=function(t){var e=new c(this,t);return this.wheels.push(e),e},a.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},c.prototype=new n,c.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},c.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var h=i.create(),l=i.create();c.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(l,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(h,l),i.dot(h,l)};var p=i.create();c.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),i.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),i.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),i.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),i.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),i.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),i.normalize(p,this.forwardEquation.t),i.scale(p,p,this.engineForce),this.vehicle.chassisBody.applyForce(p,this.forwardEquation.contactPointA)}},function(t,e,o){var i=o(34),n=(o(20),o(13),o(0)),r=o(16),s=o(10),a=(o(35),o(21)),c=o(28),h=o(22),l=o(14),p=o(6),u=(o(4),o(45),o(19)),d=o(30),f=(o(31),o(7),o(36),o(40),o(43),o(33),o(47),o(15),o(12)),v=o(44),g=o(37),y=o(2),m=o(58),b=o(60);o(46);function A(t){l.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new i,this.narrowphase=new g(this),this.islandManager=new b,this.gravity=n.fromValues(0,-9.78),t.gravity&&n.copy(this.gravity,t.gravity),this.frictionGravity=n.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new v,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new u,this.defaultContactMaterial=new d(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=A.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new m}t.exports=A,A.prototype=new Object(l.prototype),A.prototype.constructor=A,A.NO_SLEEPING=1,A.BODY_SLEEPING=2,A.ISLAND_SLEEPING=4,A.prototype.addConstraint=function(t){this.constraints.push(t)},A.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},A.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&y.splice(this.contactMaterials,e,1)},A.prototype.getContactMaterial=function(t,e){for(var o=this.contactMaterials,i=0,n=o.length;i!==n;i++){var r=o[i];if(r.materialA.id===t.id&&r.materialB.id===e.id||r.materialA.id===e.id&&r.materialB.id===t.id)return r}return!1},A.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&y.splice(this.constraints,e,1)};n.create(),n.create(),n.create(),n.create(),n.create(),n.create();var E=n.create(),B=n.fromValues(0,0),w=n.fromValues(0,0);n.fromValues(0,0),n.fromValues(0,0);A.prototype.step=function(t,e,o){if(o=o||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var i=0;this.accumulator>=t&&i<o;)this.internalStep(t),this.time+=t,this.accumulator-=t,i++;for(var r=this.accumulator%t/t,s=0;s!==this.bodies.length;s++){var a=this.bodies[s];n.lerp(a.interpolatedPosition,a.previousPosition,a.position,r),a.interpolatedAngle=a.previousAngle+r*(a.angle-a.previousAngle)}}};var P=[];A.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,o=this.springs,i=this.bodies,r=this.gravity,s=this.solver,a=this.bodies.length,c=this.broadphase,h=this.narrowphase,l=this.constraints,u=E,d=(n.scale,n.add),f=(n.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var v=n.length(this.gravity);0===v&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=v)}if(this.applyGravity)for(var g=0;g!==a;g++){var m=(b=i[g]).force;b.type===p.DYNAMIC&&b.sleepState!==p.SLEEPING&&(n.scale(u,r,b.mass*b.gravityScale),d(m,m,u))}if(this.applySpringForces)for(g=0;g!==e;g++){o[g].applyForce()}if(this.applyDamping)for(g=0;g!==a;g++){var b;(b=i[g]).type===p.DYNAMIC&&b.applyDamping(t)}var B=c.getCollisionPairs(this),w=this.disabledBodyCollisionPairs;for(g=w.length-2;g>=0;g-=2)for(var S=B.length-2;S>=0;S-=2)(w[g]===B[S]&&w[g+1]===B[S+1]||w[g+1]===B[S]&&w[g]===B[S+1])&&B.splice(S,2);var x=l.length;for(g=0;g!==x;g++){var q=l[g];if(!q.collideConnected)for(S=B.length-2;S>=0;S-=2)(q.bodyA===B[S]&&q.bodyB===B[S+1]||q.bodyB===B[S]&&q.bodyA===B[S+1])&&B.splice(S,2)}this.postBroadphaseEvent.pairs=B,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,h.reset(this);g=0;for(var L=B.length;g!==L;g+=2)for(var M=B[g],C=B[g+1],F=0,I=M.shapes.length;F!==I;F++)for(var V=M.shapes[F],R=V.position,T=V.angle,N=0,O=C.shapes.length;N!==O;N++){var G=C.shapes[N],k=G.position,_=G.angle,U=this.defaultContactMaterial;if(V.material&&G.material){var D=this.getContactMaterial(V.material,G.material);D&&(U=D)}this.runNarrowphase(h,M,V,R,T,C,G,k,_,U,this.frictionGravity)}for(g=0;g!==a;g++){(Y=i[g])._wakeUpAfterNarrowphase&&(Y.wakeUp(),Y._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(P);var W=this.endContactEvent;for(N=P.length;N--;){var z=P[N];W.shapeA=z.shapeA,W.shapeB=z.shapeB,W.bodyA=z.bodyA,W.bodyB=z.bodyB,this.emit(W)}P.length=0}var X=this.preSolveEvent;X.contactEquations=h.contactEquations,X.frictionEquations=h.frictionEquations,this.emit(X),X.contactEquations=X.frictionEquations=null;x=l.length;for(g=0;g!==x;g++)l[g].update();if(h.contactEquations.length||h.frictionEquations.length||x)if(this.islandSplit){for(f.equations.length=0,y.appendArray(f.equations,h.contactEquations),y.appendArray(f.equations,h.frictionEquations),g=0;g!==x;g++)y.appendArray(f.equations,l[g].equations);f.split(this);for(g=0;g!==f.islands.length;g++){(K=f.islands[g]).equations.length&&s.solveIsland(t,K)}}else{for(s.addEquations(h.contactEquations),s.addEquations(h.frictionEquations),g=0;g!==x;g++)s.addEquations(l[g].equations);this.solveConstraints&&s.solve(t,this),s.removeAllEquations()}for(g=0;g!==a;g++){var Y;(Y=i[g]).integrate(t)}for(g=0;g!==a;g++)i[g].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var j=this.impactEvent;for(g=0;g!==h.contactEquations.length;g++){var H=h.contactEquations[g];H.firstImpact&&(j.bodyA=H.bodyA,j.bodyB=H.bodyB,j.shapeA=H.shapeA,j.shapeB=H.shapeB,j.contactEquation=H,this.emit(j))}}if(this.sleepMode===A.BODY_SLEEPING)for(g=0;g!==a;g++)i[g].sleepTick(this.time,!1,t);else if(this.sleepMode===A.ISLAND_SLEEPING&&this.islandSplit){for(g=0;g!==a;g++)i[g].sleepTick(this.time,!0,t);for(g=0;g<this.islandManager.islands.length;g++){var K;(K=this.islandManager.islands[g]).wantsToSleep()&&K.sleep()}}this.stepping=!1;var Z=this.bodiesToBeRemoved;for(g=0;g!==Z.length;g++)this.removeBody(Z[g]);Z.length=0,this.emit(this.postStepEvent)},A.prototype.runNarrowphase=function(t,e,o,i,r,s,a,c,h,l,u){if(0!=(o.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&o.collisionMask)){n.rotate(B,i,e.angle),n.rotate(w,c,s.angle),n.add(B,B,e.position),n.add(w,w,s.position);var d,f=r+e.angle,v=h+s.angle;t.enableFriction=l.friction>0,t.frictionCoefficient=l.friction,d=e.type===p.STATIC||e.type===p.KINEMATIC?s.mass:s.type===p.STATIC||s.type===p.KINEMATIC?e.mass:e.mass*s.mass/(e.mass+s.mass),t.slipForce=l.friction*u*d,t.restitution=l.restitution,t.surfaceVelocity=l.surfaceVelocity,t.frictionStiffness=l.frictionStiffness,t.frictionRelaxation=l.frictionRelaxation,t.stiffness=l.stiffness,t.relaxation=l.relaxation,t.contactSkinSize=l.contactSkinSize,t.enabledEquations=e.collisionResponse&&s.collisionResponse&&o.collisionResponse&&a.collisionResponse;var g=t[o.type|a.type],y=0;if(g){var m=o.sensor||a.sensor,b=t.frictionEquations.length;y=o.type<a.type?g.call(t,e,o,B,f,s,a,w,v,m):g.call(t,s,a,w,v,e,o,B,f,m);var A=t.frictionEquations.length-b;if(y){if(e.allowSleep&&e.type===p.DYNAMIC&&e.sleepState===p.SLEEPING&&s.sleepState===p.AWAKE&&s.type!==p.STATIC)n.squaredLength(s.velocity)+Math.pow(s.angularVelocity,2)>=2*Math.pow(s.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0);if(s.allowSleep&&s.type===p.DYNAMIC&&s.sleepState===p.SLEEPING&&e.sleepState===p.AWAKE&&e.type!==p.STATIC)n.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(s._wakeUpAfterNarrowphase=!0);if(this.overlapKeeper.setOverlapping(e,o,s,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(o,a)){var E=this.beginContactEvent;if(E.shapeA=o,E.shapeB=a,E.bodyA=e,E.bodyB=s,E.contactEquations.length=0,"number"==typeof y)for(var P=t.contactEquations.length-y;P<t.contactEquations.length;P++)E.contactEquations.push(t.contactEquations[P]);this.emit(E)}if("number"==typeof y&&A>1)for(P=t.frictionEquations.length-A;P<t.frictionEquations.length;P++){var S=t.frictionEquations[P];S.setSlipForce(S.getSlipForce()/A)}}}}},A.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},A.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&y.splice(this.springs,e,1)},A.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},A.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(y.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},A.prototype.getBodyById=function(t){for(var e=this.bodies,o=0;o<e.length;o++){var i=e[o];if(i.id===t)return i}return!1},A.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},A.prototype.enableBodyCollision=function(t,e){for(var o=this.disabledBodyCollisionPairs,i=0;i<o.length;i+=2)if(o[i]===t&&o[i+1]===e||o[i+1]===t&&o[i]===e)return void o.splice(i,2)},A.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var o=this.bodies;for(e=o.length-1;e>=0;e--)this.removeBody(o[e]);var i=this.springs;for(e=i.length-1;e>=0;e--)this.removeSpring(i[e]);var n=this.contactMaterials;for(e=n.length-1;e>=0;e--)this.removeContactMaterial(n[e]);A.apply(this)};var S=n.create(),x=(n.fromValues(0,0),n.fromValues(0,0));A.prototype.hitTest=function(t,e,o){o=o||0;var i=new p({position:t}),l=new h,u=t,d=S,f=x;i.addShape(l);for(var v=this.narrowphase,g=[],y=0,m=e.length;y!==m;y++)for(var b=e[y],A=0,E=b.shapes.length;A!==E;A++){var B=b.shapes[A];n.rotate(d,B.position,b.angle),n.add(d,d,b.position);var w=B.angle+b.angle;(B instanceof r&&v.circleParticle(b,B,d,w,i,l,u,0,!0)||B instanceof s&&v.particleConvex(i,l,u,0,b,B,d,w,!0)||B instanceof a&&v.particlePlane(i,l,u,0,b,B,d,w,!0)||B instanceof c&&v.particleCapsule(i,l,u,0,b,B,d,w,!0)||B instanceof h&&n.squaredLength(n.sub(f,d,t))<o*o)&&g.push(b)}return g},A.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,o=0;o!==e.length;o++)for(var i=e[o],n=0;n!==i.equations.length;n++){var r=i.equations[n];r.stiffness=t,r.needsUpdate=!0}var s=this.contactMaterials;for(o=0;o!==s.length;o++){(i=s[o]).stiffness=i.frictionStiffness=t}(i=this.defaultContactMaterial).stiffness=i.frictionStiffness=t},A.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var o=this.constraints[e],i=0;i!==o.equations.length;i++){var n=o.equations[i];n.relaxation=t,n.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++){(o=this.contactMaterials[e]).relaxation=o.frictionRelaxation=t}(o=this.defaultContactMaterial).relaxation=o.frictionRelaxation=t};var q=new f,L=[];A.prototype.raycast=function(t,e){return e.getAABB(q),this.broadphase.aabbQuery(this,q,L),e.intersectBodies(t,L),L.length=0,t.hasHit()}},function(t,e,o){var i=o(38),n=(o(48),o(59));o(2);function r(){this.overlappingShapesLastState=new i,this.overlappingShapesCurrentState=new i,this.recordPool=new n({size:16}),this.tmpDict=new i,this.tmpArray1=[]}t.exports=r,r.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,o=t.keys.length;o--;){var i=t.keys[o],n=t.getByKey(i);e.getByKey(i);n&&this.recordPool.release(n)}t.reset(),t.copy(e),e.reset()},r.prototype.setOverlapping=function(t,e,o,i){this.overlappingShapesLastState;var n=this.overlappingShapesCurrentState;if(!n.get(e.id,i.id)){var r=this.recordPool.get();r.set(t,e,o,i),n.set(e.id,i.id,r)}},r.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},r.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},r.prototype.bodiesAreOverlapping=function(t,e){for(var o=this.overlappingShapesCurrentState,i=o.keys.length;i--;){var n=o.keys[i],r=o.data[n];if(r.bodyA===t&&r.bodyB===e||r.bodyA===e&&r.bodyB===t)return!0}return!1},r.prototype.getDiff=function(t,e,o){var i=t,n=e;(o=o||[]).length=0;for(var r=n.keys.length;r--;){var s=n.keys[r],a=n.data[s];if(!a)throw new Error("Key "+s+" had no data!");i.data[s]||o.push(a)}return o},r.prototype.isNewOverlap=function(t,e){var o=0|t.id,i=0|e.id,n=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!n.get(o,i)&&!!r.get(o,i)},r.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},r.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},r.prototype.getBodyDiff=function(t,e){e=e||[];for(var o=this.tmpDict,i=t.length;i--;){var n=t[i];o.set(0|n.bodyA.id,0|n.bodyB.id,n)}for(i=o.keys.length;i--;){(n=o.getByKey(o.keys[i]))&&e.push(n.bodyA,n.bodyB)}return o.reset(),e}},function(t,e,o){var i=o(48),n=o(8);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new i},r.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},function(t,e,o){o(0),o(49),o(50);var i=o(61),n=o(62),r=o(6);function s(t){this.nodePool=new i({size:16}),this.islandPool=new n({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}t.exports=s,s.getUnvisitedNode=function(t){for(var e=t.length,o=0;o!==e;o++){var i=t[o];if(!i.visited&&i.body.type===r.DYNAMIC)return i}return!1},s.prototype.visit=function(t,e,o){e.push(t.body);for(var i=t.equations.length,n=0;n!==i;n++){var r=t.equations[n];-1===o.indexOf(r)&&o.push(r)}},s.prototype.bfs=function(t,e,o){var i=this.queue;for(i.length=0,i.push(t),t.visited=!0,this.visit(t,e,o);i.length;)for(var n,a=i.pop();n=s.getUnvisitedNode(a.neighbors);)n.visited=!0,this.visit(n,e,o),n.body.type===r.DYNAMIC&&i.push(n)},s.prototype.split=function(t){for(var e=t.bodies,o=this.nodes,i=this.equations;o.length;)this.nodePool.release(o.pop());for(var n=0;n!==e.length;n++){var r=this.nodePool.get();r.body=e[n],o.push(r)}for(var a=0;a!==i.length;a++){var c=i[a],h=(n=e.indexOf(c.bodyA),e.indexOf(c.bodyB)),l=o[n],p=o[h];l.neighbors.push(p),p.neighbors.push(l),l.equations.push(c),p.equations.push(c)}var u,d=this.islands;for(n=0;n<d.length;n++)this.islandPool.release(d[n]);for(d.length=0;u=s.getUnvisitedNode(o);){var f=this.islandPool.get();this.bfs(u,f.bodies,f.equations),d.push(f)}return d}},function(t,e,o){var i=o(50),n=o(8);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new i},r.prototype.destroy=function(t){return t.reset(),this}},function(t,e,o){var i=o(49),n=o(8);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new i},r.prototype.destroy=function(t){return t.reset(),this}},function(t,e,o){},function(t,e,o){"use strict";o.r(e);var i=o(1),n=o(5),r=o(9);new i.Vector3;const s=new i.MeshBasicMaterial({side:i.DoubleSide}),a=new i.MeshBasicMaterial({side:i.DoubleSide,wireframe:!0,color:"#000000"});class c{constructor(t,e={}){const o=new i.Geometry;t.forEach(t=>{o.vertices.push(new i.Vector3(t.x,t.y,0))});const r=new i.Box3;o.vertices.forEach(t=>r.expandByPoint(t));const c=new i.Vector3;r.getCenter(c),o.vertices.forEach(t=>t.sub(c));for(let t=2;t<o.vertices.length;t++)o.faces.push(new i.Face3(0,t-1,t));const h=new i.Mesh(o,s),l=new i.Mesh(o,a);l.position.z=1,this.mesh=new i.Object3D,this.mesh.add(h),this.mesh.add(l);const p=new n.Convex({vertices:o.vertices.map(t=>[t.x,t.y])});this.body=new n.Body(e),this.body.addShape(p)}syncMeshWithBody(){this.mesh.position.x=this.body.interpolatedPosition[0],this.mesh.position.y=this.body.interpolatedPosition[1],this.mesh.rotation.z=this.body.interpolatedAngle}}new i.Vector3;const h=new i.MeshBasicMaterial({side:i.DoubleSide,wireframe:!0,color:"#000000"});class l{constructor(t,e={}){const o=new i.MeshBasicMaterial({side:i.DoubleSide,color:new i.Color(.5+.5*Math.random(),.5+.5*Math.random(),.5+.5*Math.random())});console.log(t);const r=new i.Geometry;this.body=new n.Body(e);let s=0;t.forEach(t=>{t.forEach(({x:t,y:e})=>{r.vertices.push(new i.Vector3(t,e,0))});for(let e=2;e<t.length;e++)r.faces.push(new i.Face3(s,s+e-1,s+e));s+=t.length;const e=new n.Convex({vertices:t.map(({x:t,y:e})=>[t,e])}),o=n.vec2.create();for(let t=0;t!==e.vertices.length;t++){const o=e.vertices[t];n.vec2.sub(o,o,e.centerOfMass)}n.vec2.scale(o,e.centerOfMass,1),this.body.addShape(e,o)});const a=new i.Mesh(r,o),c=new i.Mesh(r,h);c.position.z=1,this.mesh=new i.Object3D,this.mesh.add(a),this.mesh.add(c)}syncMeshWithBody(){this.mesh.position.x=this.body.interpolatedPosition[0],this.mesh.position.y=this.body.interpolatedPosition[1],this.mesh.rotation.z=this.body.interpolatedAngle}}const p=1e5;class u{constructor(t,e,o,i,n){this.x=e,this.y=o,this.dx=i,this.dy=n,this.next=null,this.prev=null,this.merged=!1,this.edgeSet=null,this.block=t}computeEdgeSet(){if(this.edgeSet)return this.edgeSet;const t=[this];this.edgeSet=t;let e=this.next,o=0;for(;null!==e&&e!==this&&o++<p;)t.push(e),e.edgeSet=t,e=e.next;return t}}class d{constructor(){this.edges=[]}traverseForward(t){this.edges=[t],t.edgeSet=this;let e=t.next,o=0;for(;null!==e&&e!==t&&o++<p;)this.edges.push(e),null!==e.edgeSet&&e.edgeSet,e.edgeSet=this,e=e.next}traverseBackward(t){this.edges=[t],t.edgeSet=this;let e=t.prev,o=0;for(;null!==e&&e!==t&&o++<p;)this.edges.push(e),null!==e.edgeSet&&e.edgeSet,e.edgeSet=this,e=e.prev}getLeftmostEdge(){let t=null,e=1/0;for(let o=0;o<this.edges.length;o++){const i=this.edges[o];i.x<e&&(e=i.x,t=i)}return t}}const f={left:"right",top:"bottom",right:"left",bottom:"top"};class v{constructor(t,e,o){this.x=t,this.y=e,this.edges={left:new u(this,t,e+o,0,-1),top:new u(this,t,e,1,0),right:new u(this,t+o,e,0,1),bottom:new u(this,t+o,e+o,-1,0)},this.edges.left.prev=this.edges.bottom,this.edges.left.next=this.edges.top,this.edges.top.prev=this.edges.left,this.edges.top.next=this.edges.right,this.edges.right.prev=this.edges.top,this.edges.right.next=this.edges.bottom,this.edges.bottom.prev=this.edges.right,this.edges.bottom.next=this.edges.left,this.blockSet=null}mergeNeighborEdge(t,e){const o=f[e];if(void 0===o)return;const i=this.edges[e],n=t.edges[o];null!==i&&null!==n&&(i.merged=!0,n.merged=!0,i.prev.next=n.next,i.next.prev=n.prev,n.prev.next=i.next,n.next.prev=i.prev)}getLeftmostEdge(){return this.edges.left}getRightmostEdge(){return this.edges.right}getTopmostEdge(){return this.edges.top}getBottommostEdge(){return this.edges.bottom}}class g extends v{constructor(t,e,o){super(t,e,o),this.edges={left:new u(this,t,e+o,0,-1),right:new u(this,t,e,1,1),bottom:new u(this,t+o,e+o,-1,0)},this.edges.top=this.edges.right,this.edges.left.prev=this.edges.bottom,this.edges.left.next=this.edges.right,this.edges.right.prev=this.edges.left,this.edges.right.next=this.edges.bottom,this.edges.bottom.prev=this.edges.right,this.edges.bottom.next=this.edges.left}}o(63);let y,m,b,A;o.d(e,"default",function(){return B}),window.decomp=r;const E={width:400,height:400};function B(){const t=document.getElementById("container");(y=document.createElement("canvas")).style=`\n    background: #cccccc;\n    width: ${E.width}px;\n    height: ${E.height}px;\n  `,t.appendChild(y),m=new i.Scene,(b=new i.OrthographicCamera(-100,300,-100,300,-100,100)).lookAt(new i.Vector3(0,0,-1)),b.position.copy(new i.Vector3(0,0,1)),(A=new i.WebGLRenderer({canvas:y,preserveDrawingBuffer:!0})).setClearColor(new i.Color("#444444")),A.setPixelRatio(window.devicePixelRatio),A.setSize(E.width,E.height);const e=new n.World({gravity:[0,300]}),o=new c([{x:0,y:0},{x:10,y:-50},{x:50,y:0}],{mass:5,damping:.5,angularVelocity:20});m.add(o.mesh),e.addBody(o.body);const s=function(t,e,o){const i=[],n=Math.floor(t.length/e);for(let r=0;r<e;r++){const s=[];i[r]=s;for(let i=0;i<n;i++){let n=null;switch(t[r+i*e]){case 1:n=new v(r*o,i*o,o);break;case 2:n=new g(r*o,i*o,o)}s.push(n)}}for(let t=0;t<e;t++)for(let e=0;e<n;e++){const o=i[t][e];if(null===o)continue;const n=t>0?i[t-1][e]:null,r=e>0?i[t][e-1]:null;null!==n&&o.mergeNeighborEdge(n,"left"),null!==r&&o.mergeNeighborEdge(r,"top")}let s=[];for(let t=0;t<e;t++){const o=i[t];for(let r=0;r<n;r++){const c=o[r];if(null===c||null!==c.blockSet)continue;const h=[],l=[];function a(t,o){if(t<0||t>=e||o<0||o>=n)return!1;const r=i[t][o];if(null===r||null!==r.blockSet)return!1;h.push(r),r.blockSet=h,l.push([t,o,r])}for(a(t,r);l.length>0;){const[t,e]=l.pop();a(t,e-1),a(t,e+1),a(t-1,e),a(t+1,e)}h.length&&s.push(h)}}const c=[];for(let t=0;t<s.length;t++){const e=s[t],n=[];for(let t=0;t<e.length;t++){const o=e[t].getLeftmostEdge();if(!o.merged&&null===o.edgeSet){const t=new d;t.traverseForward(o),n.push(t)}}const a=n[0];for(let t=1;t<n.length;t++){let e=n[t].getLeftmostEdge(),r=e.block,s=r.x/o;const a=r.y/o;let c,h,l=i[s][a-1],p=e.prev,u=e;for(;c=l.getBottommostEdge(),h=r.getTopmostEdge(),c.merged=!1,h.merged=!1,p.next=c,c.prev=p,u.prev=h,h.next=u,p=c,u=h,r.getLeftmostEdge().merged;)r=i[s-=1][a],l=i[s][a-1];const d=r.getLeftmostEdge(),f=d.next;d.next=h,h.prev=d,f.prev=c,c.next=f}a.traverseForward(a.edges[0]);const h=a.edges.map(({x:t,y:e})=>[t,e]);Object(r.makeCCW)(h),Object(r.removeCollinearPoints)(h,.01);const l=Object(r.quickDecomp)(h);c.push(l.map(t=>t.map(([t,e])=>({x:t,y:e}))))}return c}(w,P,24);console.log(s);const a=s.map(t=>new l(t,{mass:0,isStatic:!0,position:[-96,-96]}));a.forEach(t=>{m.add(t.mesh),e.addBody(t.body)});const h=1/60,p=10;let u;requestAnimationFrame(function t(){const i=(new Date).getTime();var n=u?(i-u)/1e3:0;e.step(h,n,p),u=i,o.syncMeshWithBody(),a.forEach(t=>t.syncMeshWithBody()),A.render(m,b),requestAnimationFrame(t),a[0].angle+=.05})}const w=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,1,2,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,2,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,2,0,0,0,0,0,0,0,0,1,1,0,0,1,1,2,1,2,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],P=16}]).default;
//# sourceMappingURL=index.js.map